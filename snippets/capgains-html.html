<div class="page" id="page-capgains" role="region" aria-label="Capital Gains Tax Calculator">
    <div class="calc-container" style="padding-top: 6rem;">
      <div class="calc-back" onclick="showPage('home')" role="button" tabindex="0" aria-label="Back to Tools">‚Üê Back to Tools</div>
      <div class="calc-header animate-fade-up">
        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üìä</div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Capital Gains Tax Calculator</h1>
        <p style="color: var(--text-secondary); max-width: 540px; margin: 0 auto;">Calculate Canadian capital gains tax with 2024+ inclusion rate changes. Compare old vs new rules.</p>
      </div>
      <div class="action-buttons" style="justify-content: center;">
        <button class="btn btn-secondary btn-sm" onclick="generatePDFReport('Capital Gains Tax Calculator')">üìÑ Download PDF Report</button>
        <button class="btn btn-secondary btn-sm" onclick="copyResults('Capital Gains Tax Calculator')">üìã Copy Results</button>
        <button class="btn btn-secondary btn-sm" onclick="shareCalculator('capgains')">üîó Share</button>
      </div>
      <div class="calc-grid" style="margin-top: 2rem;">
        <div class="calc-inputs glass-card" style="padding: var(--space-xl);">

          <div class="input-group">
            <label for="cg-asset-type">Asset Type</label>
            <select id="cg-asset-type" onchange="calculateCapGains()">
              <option value="stocks">Stocks / ETFs / Mutual Funds</option>
              <option value="real-estate">Real Estate (non-principal)</option>
              <option value="crypto">Cryptocurrency</option>
              <option value="business">Qualified Small Business Shares</option>
              <option value="farm">Qualified Farm/Fishing Property</option>
              <option value="other">Other Capital Property</option>
            </select>
          </div>

          <div class="input-group">
            <label for="cg-year">Year of Disposition</label>
            <select id="cg-year" onchange="calculateCapGains()">
              <option value="2023">2023 or earlier</option>
              <option value="2024">2024</option>
              <option value="2025" selected>2025</option>
              <option value="2026">2026+</option>
            </select>
          </div>

          <div class="input-group">
            <label for="cg-province">Province / Territory</label>
            <select id="cg-province" onchange="calculateCapGains()">
              <option value="AB">Alberta</option>
              <option value="BC">British Columbia</option>
              <option value="MB">Manitoba</option>
              <option value="NB">New Brunswick</option>
              <option value="NL">Newfoundland & Labrador</option>
              <option value="NS">Nova Scotia</option>
              <option value="NT">Northwest Territories</option>
              <option value="NU">Nunavut</option>
              <option value="ON" selected>Ontario</option>
              <option value="PE">Prince Edward Island</option>
              <option value="QC">Quebec</option>
              <option value="SK">Saskatchewan</option>
              <option value="YT">Yukon</option>
            </select>
          </div>

          <div class="input-group">
            <label for="cg-sale-price">Sale Price / Proceeds of Disposition ($)</label>
            <input type="number" id="cg-sale-price" value="500000" min="0" step="1000" oninput="calculateCapGains()">
          </div>

          <div class="input-group">
            <label for="cg-acb">Adjusted Cost Base (ACB) ($)</label>
            <input type="number" id="cg-acb" value="200000" min="0" step="1000" oninput="calculateCapGains()">
          </div>

          <div class="input-group">
            <label for="cg-expenses">Selling Expenses / Commissions ($)</label>
            <input type="number" id="cg-expenses" value="0" min="0" step="100" oninput="calculateCapGains()">
          </div>

          <div class="input-group">
            <label for="cg-other-gains">Other Capital Gains This Year ($)</label>
            <input type="number" id="cg-other-gains" value="0" min="0" step="1000" oninput="calculateCapGains()">
            <small style="color: var(--text-secondary);">Used to determine if total exceeds $250K threshold</small>
          </div>

          <div class="input-group">
            <label for="cg-capital-losses">Capital Losses to Apply ($)</label>
            <input type="number" id="cg-capital-losses" value="0" min="0" step="1000" oninput="calculateCapGains()">
            <small style="color: var(--text-secondary);">Carry-forward/back losses to offset gains</small>
          </div>

          <div class="input-group">
            <label for="cg-other-income">Other Taxable Income ($)</label>
            <input type="number" id="cg-other-income" value="80000" min="0" step="1000" oninput="calculateCapGains()">
            <small style="color: var(--text-secondary);">Employment, business, etc. (for bracket calculation)</small>
          </div>

          <div class="input-group" id="cg-lcge-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
              <input type="checkbox" id="cg-lcge" onchange="calculateCapGains()">
              Apply Lifetime Capital Gains Exemption (LCGE)
            </label>
            <small style="color: var(--text-secondary);">$1.25M for qualified small business shares (2025+), $1.016M (2024)</small>
          </div>

          <div class="input-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
              <input type="checkbox" id="cg-principal-res" onchange="calculateCapGains()">
              Principal Residence Exemption
            </label>
          </div>

        </div>
        <div class="calc-results" id="cg-results" aria-live="polite"></div>
      </div>
      <div style="margin-top: 2rem; padding: 1.5rem; background: var(--bg-secondary); border-radius: var(--radius-lg); border: 1px solid var(--border-primary);" id="cg-breakdown"></div>
      <div class="affiliate-resources">
        <h3>üìö Recommended Resources</h3>
        <div class="affiliate-grid">
          <a href="https://www.amazon.ca/dp/1119356296?tag=figgy0a0-20" target="_blank" rel="noopener noreferrer sponsored" class="affiliate-card">
            <div class="affiliate-info">
              <span class="affiliate-title">Millionaire Teacher</span>
              <span class="affiliate-author">Andrew Hallam</span>
              <span class="affiliate-why">Build wealth on any salary ‚Äî with Canadian examples</span>
            </div>
          </a>
          <a href="https://www.amazon.ca/dp/0143193856?tag=figgy0a0-20" target="_blank" rel="noopener noreferrer sponsored" class="affiliate-card">
            <div class="affiliate-info">
              <span class="affiliate-title">Wealthing Like Rabbits</span>
              <span class="affiliate-author">Robert R. Brown</span>
              <span class="affiliate-why">Fun Canadian guide to personal finance fundamentals</span>
            </div>
          </a>
        </div>
        <p class="affiliate-disclosure">As an Amazon Associate, FiggyBank earns from qualifying purchases.</p>
      </div>
    </div>
</div>
