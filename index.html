<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Babaganoush | Smart Financial Tools</title>
  <meta name="description" content="Free premium financial calculators â€” business valuation, M&A analysis, mortgage calculator, investment returns, RRSP/TFSA optimizer. Built by finance professionals, for everyone." />
  <meta name="keywords" content="financial calculator, business valuation, DCF calculator, mortgage calculator Canada, M&A accretion dilution, RRSP TFSA, investment returns, compound interest" />
  <meta property="og:title" content="Babaganoush | Smart Financial Tools" />
  <meta property="og:description" content="Free premium financial calculators built by finance professionals." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://rajkcho.github.io/Babaganoush/" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="canonical" href="https://rajkcho.github.io/Babaganoush/" />
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
  
  <!-- Google Analytics (uncomment and replace G-XXXXXXXXXX with your Measurement ID) -->
  <!--
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>
  -->

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#6366f1" />

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§®</text></svg>" />

  <!-- Structured Data: WebApplication -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Babaganoush",
    "description": "Free premium financial calculators â€” business valuation, M&A analysis, mortgage calculator, investment returns, RRSP/TFSA optimizer, compound interest, startup runway, net worth tracker.",
    "url": "https://rajkcho.github.io/Babaganoush/",
    "applicationCategory": "FinanceApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "CAD"
    }
  }
  </script>

  <!-- Structured Data: FAQPage -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Is Babaganoush free to use?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, all financial calculators on Babaganoush are 100% free with no sign-up required."
        }
      },
      {
        "@type": "Question",
        "name": "Is my financial data safe?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Absolutely. All calculations run entirely in your browser. No data is sent to any server â€” your numbers never leave your device."
        }
      },
      {
        "@type": "Question",
        "name": "What calculators are available?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Babaganoush includes 8 professional-grade calculators: Business Valuation (DCF, Multiples, Asset-based), M&A Deal Analyzer, Canadian Mortgage Calculator, Investment Returns (CAGR & DCA), RRSP vs TFSA Optimizer, Compound Interest Visualizer, Startup Runway Calculator, and Net Worth Tracker."
        }
      },
      {
        "@type": "Question",
        "name": "How accurate are the mortgage calculations for Canada?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The mortgage calculator uses Canadian semi-annual compounding as required by law, includes CMHC insurance premiums, provincial land transfer taxes, and OSFI B-20 stress test calculations."
        }
      },
      {
        "@type": "Question",
        "name": "Should I choose RRSP or TFSA?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "It depends on your current vs. expected retirement tax rate. Generally, RRSP is better if your current tax rate is higher than your expected retirement rate. Use our RRSP vs TFSA Optimizer to compare based on your specific situation."
        }
      }
    ]
  }
  </script>
  
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BABAGANOUSH â€” Premium Financial Tools
       Design System & Core Styles
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    :root {
      /* Brand Colors */
      --brand-primary: #6366f1;
      --brand-secondary: #8b5cf6;
      --brand-accent: #06b6d4;
      --brand-success: #10b981;
      --brand-warning: #f59e0b;
      --brand-danger: #ef4444;
      
      /* Dark Theme (Default) */
      --bg-primary: #0a0a0f;
      --bg-secondary: #111118;
      --bg-card: #16161f;
      --bg-card-hover: #1c1c28;
      --bg-elevated: #1e1e2a;
      --border-primary: #1e1e2e;
      --border-hover: #2e2e42;
      --text-primary: #f1f0f5;
      --text-secondary: #9ca3af;
      --text-muted: #6b7280;
      --glass-bg: rgba(22, 22, 31, 0.7);
      --glass-border: rgba(255, 255, 255, 0.06);
      
      /* Spacing */
      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      --space-3xl: 4rem;
      
      /* Radius */
      --radius-sm: 0.5rem;
      --radius-md: 0.75rem;
      --radius-lg: 1rem;
      --radius-xl: 1.5rem;
      --radius-full: 9999px;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
      --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
      --shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.5);
      --shadow-xl: 0 20px 60px rgba(0, 0, 0, 0.6);
      --shadow-glow: 0 0 30px rgba(99, 102, 241, 0.15);
      --shadow-glow-accent: 0 0 30px rgba(6, 182, 212, 0.15);
    }
    
    /* Light Theme */
    .light {
      --bg-primary: #fafafa;
      --bg-secondary: #ffffff;
      --bg-card: #ffffff;
      --bg-card-hover: #f8f8fc;
      --bg-elevated: #f3f4f6;
      --border-primary: #e5e7eb;
      --border-hover: #d1d5db;
      --text-primary: #111827;
      --text-secondary: #4b5563;
      --text-muted: #9ca3af;
      --glass-bg: rgba(255, 255, 255, 0.8);
      --glass-border: rgba(0, 0, 0, 0.06);
      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
      --shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 60px rgba(0, 0, 0, 0.12);
      --shadow-glow: 0 0 30px rgba(99, 102, 241, 0.08);
    }
    
    /* â”€â”€ Reset & Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    
    html {
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
      transition: background-color 0.4s ease, color 0.4s ease;
    }
    
    /* â”€â”€ Scrollbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg-secondary); }
    ::-webkit-scrollbar-thumb { background: var(--border-hover); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--brand-primary); }
    
    /* â”€â”€ Typography â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 700;
      line-height: 1.2;
      letter-spacing: -0.02em;
    }
    
    .mono { font-family: 'JetBrains Mono', monospace; }
    
    .gradient-text {
      background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary), var(--brand-accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    /* â”€â”€ Animations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-30px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.1); }
      50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.25); }
    }
    
    @keyframes gradient-shift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    @keyframes orbit {
      from { transform: rotate(0deg) translateX(60px) rotate(0deg); }
      to { transform: rotate(360deg) translateX(60px) rotate(-360deg); }
    }
    
    @keyframes counter-orbit {
      from { transform: rotate(0deg) translateX(40px) rotate(0deg); }
      to { transform: rotate(-360deg) translateX(40px) rotate(360deg); }
    }
    
    @keyframes morphBlob {
      0%, 100% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
      25% { border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%; }
      50% { border-radius: 50% 60% 30% 60% / 30% 70% 60% 40%; }
      75% { border-radius: 60% 30% 60% 40% / 60% 40% 30% 70%; }
    }
    
    @keyframes typewriter {
      from { width: 0; }
      to { width: 100%; }
    }
    
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }
    
    @keyframes countUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes ripple {
      0% { transform: scale(0); opacity: 0.6; }
      100% { transform: scale(4); opacity: 0; }
    }
    
    @keyframes borderGlow {
      0%, 100% { border-color: rgba(99, 102, 241, 0.2); }
      50% { border-color: rgba(99, 102, 241, 0.5); }
    }
    
    @keyframes spin-slow {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .animate-fade-up { animation: fadeInUp 0.6s ease both; }
    .animate-fade-up-1 { animation: fadeInUp 0.6s ease 0.1s both; }
    .animate-fade-up-2 { animation: fadeInUp 0.6s ease 0.2s both; }
    .animate-fade-up-3 { animation: fadeInUp 0.6s ease 0.3s both; }
    .animate-fade-up-4 { animation: fadeInUp 0.6s ease 0.4s both; }
    .animate-fade-in { animation: fadeIn 0.6s ease both; }
    .animate-scale-in { animation: scaleIn 0.5s ease both; }
    .animate-slide-left { animation: slideInLeft 0.6s ease both; }
    .animate-slide-right { animation: slideInRight 0.6s ease both; }
    
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
    
    /* â”€â”€ Glass Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .glass-card {
      background: var(--glass-bg);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      transition: all 0.3s ease;
    }
    
    .glass-card:hover {
      border-color: var(--border-hover);
      box-shadow: var(--shadow-lg);
    }
    
    /* â”€â”€ Tool Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .tool-card {
      background: var(--bg-card);
      border: 1px solid var(--border-primary);
      border-radius: var(--radius-xl);
      padding: var(--space-xl);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    
    .tool-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--brand-primary), var(--brand-secondary), var(--brand-accent));
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .tool-card:hover {
      transform: translateY(-4px);
      border-color: var(--border-hover);
      box-shadow: var(--shadow-xl), var(--shadow-glow);
      background: var(--bg-card-hover);
    }
    
    .tool-card:hover::before { opacity: 1; }
    
    .tool-card .tool-icon {
      width: 56px;
      height: 56px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      transition: transform 0.3s ease;
    }
    
    .tool-card:hover .tool-icon { transform: scale(1.1) rotate(-3deg); }
    
    /* â”€â”€ Button System â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 0.875rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      text-decoration: none;
    }
    
    .btn::after {
      content: '';
      position: absolute;
      inset: 0;
      background: white;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .btn:hover::after { opacity: 0.1; }
    .btn:active { transform: scale(0.97); }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary));
      color: white;
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
    }
    
    .btn-primary:hover {
      box-shadow: 0 6px 25px rgba(99, 102, 241, 0.4);
      transform: translateY(-1px);
    }
    
    .btn-secondary {
      background: var(--bg-card);
      color: var(--text-primary);
      border: 1px solid var(--border-primary);
    }
    
    .btn-secondary:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-hover);
    }
    
    .btn-ghost {
      background: transparent;
      color: var(--text-secondary);
    }
    
    .btn-ghost:hover { color: var(--text-primary); }
    
    .btn-lg { padding: 1rem 2rem; font-size: 1rem; border-radius: var(--radius-lg); }
    .btn-sm { padding: 0.5rem 1rem; font-size: 0.8rem; }
    
    /* â”€â”€ Input System â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 0.375rem;
    }
    
    .input-group label {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .input-group input, .input-group select {
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: var(--radius-md);
      padding: 0.75rem 1rem;
      color: var(--text-primary);
      font-size: 0.95rem;
      font-family: 'JetBrains Mono', monospace;
      transition: all 0.3s ease;
      width: 100%;
    }
    
    .input-group input:focus, .input-group select:focus {
      outline: none;
      border-color: var(--brand-primary);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
    }
    
    .input-group input::placeholder { color: var(--text-muted); }
    
    .input-help {
      font-size: 0.72rem;
      color: var(--text-muted);
      margin-top: 0.125rem;
    }
    
    /* â”€â”€ Range Slider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      background: var(--border-primary);
      border-radius: 3px;
      outline: none;
      cursor: pointer;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary));
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.4);
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.2);
    }
    
    /* â”€â”€ Result Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .result-card {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(139, 92, 246, 0.05));
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      animation: scaleIn 0.4s ease both;
    }
    
    .result-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 2rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--brand-primary), var(--brand-accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .result-label {
      font-size: 0.8rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 600;
    }
    
    /* â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .nav-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: var(--glass-bg);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid var(--glass-border);
      padding: 0.75rem 1.5rem;
      transition: all 0.3s ease;
      animation: fadeInDown 0.6s ease both;
    }
    
    .nav-bar.scrolled {
      box-shadow: var(--shadow-md);
    }
    
    .nav-inner {
      max-width: 1280px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .nav-logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      text-decoration: none;
      font-weight: 800;
      font-size: 1.1rem;
      color: var(--text-primary);
    }
    
    .nav-logo-icon {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-sm);
      background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      color: white;
      font-weight: 800;
    }
    
    .nav-links {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      list-style: none;
    }
    
    .nav-links a {
      padding: 0.5rem 0.75rem;
      border-radius: var(--radius-sm);
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.85rem;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .nav-links a:hover, .nav-links a.active {
      color: var(--text-primary);
      background: rgba(99, 102, 241, 0.1);
    }
    
    .nav-actions {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .theme-toggle {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border-primary);
      background: var(--bg-card);
      color: var(--text-secondary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      transition: all 0.3s ease;
    }
    
    .theme-toggle:hover {
      background: var(--bg-card-hover);
      color: var(--text-primary);
      border-color: var(--border-hover);
    }
    
    /* Mobile nav */
    .mobile-menu-btn {
      display: none;
      width: 40px;
      height: 40px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border-primary);
      background: var(--bg-card);
      color: var(--text-primary);
      cursor: pointer;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }
    
    @media (max-width: 768px) {
      .nav-links { display: none; }
      .mobile-menu-btn { display: flex; }
      .nav-links.mobile-open {
        display: flex;
        flex-direction: column;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--bg-secondary);
        border-bottom: 1px solid var(--border-primary);
        padding: 1rem;
        gap: 0.25rem;
      }
      .nav-links.mobile-open a {
        padding: 0.75rem 1rem;
        width: 100%;
      }
    }
    
    /* â”€â”€ Hero Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 8rem 1.5rem 4rem;
      position: relative;
      overflow: hidden;
    }
    
    .hero-bg {
      position: absolute;
      inset: 0;
      z-index: 0;
    }
    
    .hero-blob {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.15;
    }
    
    .hero-blob-1 {
      width: 600px;
      height: 600px;
      background: var(--brand-primary);
      top: -200px;
      right: -100px;
      animation: morphBlob 20s ease-in-out infinite;
    }
    
    .hero-blob-2 {
      width: 400px;
      height: 400px;
      background: var(--brand-accent);
      bottom: -100px;
      left: -50px;
      animation: morphBlob 15s ease-in-out infinite reverse;
    }
    
    .hero-blob-3 {
      width: 300px;
      height: 300px;
      background: var(--brand-secondary);
      top: 40%;
      left: 50%;
      animation: morphBlob 25s ease-in-out infinite 5s;
    }
    
    /* Grid pattern */
    .hero-grid {
      position: absolute;
      inset: 0;
      background-image: 
        linear-gradient(rgba(99, 102, 241, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(99, 102, 241, 0.03) 1px, transparent 1px);
      background-size: 60px 60px;
      mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
      -webkit-mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
    }
    
    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
    }
    
    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: var(--radius-full);
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--brand-primary);
      margin-bottom: 1.5rem;
      animation: fadeInUp 0.6s ease both;
    }
    
    .hero-badge .pulse-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--brand-success);
      animation: pulse-glow 2s ease-in-out infinite;
    }
    
    .hero h1 {
      font-size: clamp(2.5rem, 6vw, 4.5rem);
      font-weight: 900;
      letter-spacing: -0.03em;
      margin-bottom: 1.25rem;
      line-height: 1.05;
      animation: fadeInUp 0.6s ease 0.1s both;
    }
    
    .hero p {
      font-size: clamp(1rem, 2vw, 1.25rem);
      color: var(--text-secondary);
      max-width: 600px;
      margin: 0 auto 2rem;
      line-height: 1.7;
      animation: fadeInUp 0.6s ease 0.2s both;
    }
    
    .hero-cta {
      display: flex;
      align-items: center;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
      animation: fadeInUp 0.6s ease 0.3s both;
    }
    
    .hero-stats {
      display: flex;
      gap: 3rem;
      margin-top: 4rem;
      animation: fadeInUp 0.6s ease 0.4s both;
    }
    
    .hero-stat {
      text-align: center;
    }
    
    .hero-stat-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--text-primary);
    }
    
    .hero-stat-label {
      font-size: 0.75rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-top: 0.25rem;
    }
    
    @media (max-width: 640px) {
      .hero-stats { gap: 1.5rem; }
      .hero-stat-value { font-size: 1.25rem; }
    }
    
    /* â”€â”€ Sections â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .section {
      padding: 5rem 1.5rem;
      max-width: 1280px;
      margin: 0 auto;
    }
    
    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }
    
    .section-label {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      font-size: 0.75rem;
      font-weight: 700;
      color: var(--brand-primary);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.75rem;
    }
    
    .section-label .label-line {
      width: 24px;
      height: 2px;
      background: linear-gradient(90deg, var(--brand-primary), var(--brand-accent));
      border-radius: 1px;
    }
    
    .section-title {
      font-size: clamp(1.75rem, 4vw, 2.5rem);
      letter-spacing: -0.03em;
      margin-bottom: 0.75rem;
    }
    
    .section-desc {
      font-size: 1.05rem;
      color: var(--text-secondary);
      max-width: 600px;
      margin: 0 auto;
    }
    
    /* â”€â”€ Tools Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }
    
    @media (max-width: 640px) {
      .tools-grid { grid-template-columns: 1fr; }
    }
    
    /* â”€â”€ Calculator Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .calc-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
    }
    
    .calc-header {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .calc-back {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.85rem;
      font-weight: 500;
      margin-bottom: 1rem;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    
    .calc-back:hover { color: var(--text-primary); }
    
    .calc-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }
    
    .calc-inputs {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .calc-results {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    @media (max-width: 768px) {
      .calc-grid { grid-template-columns: 1fr; }
    }
    
    /* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .footer {
      border-top: 1px solid var(--border-primary);
      padding: 3rem 1.5rem;
      text-align: center;
    }
    
    .footer-content {
      max-width: 1280px;
      margin: 0 auto;
    }
    
    .footer-brand {
      font-weight: 800;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }
    
    .footer-text {
      font-size: 0.8rem;
      color: var(--text-muted);
      max-width: 500px;
      margin: 0 auto 1.5rem;
      line-height: 1.7;
    }
    
    .footer-links {
      display: flex;
      gap: 1.5rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .footer-links a {
      font-size: 0.8rem;
      color: var(--text-muted);
      text-decoration: none;
      transition: color 0.3s ease;
    }
    
    .footer-links a:hover { color: var(--text-primary); }
    
    /* â”€â”€ Utility â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }
    
    /* â”€â”€ Tab System â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .tabs {
      display: flex;
      gap: 0.25rem;
      background: var(--bg-secondary);
      border-radius: var(--radius-md);
      padding: 0.25rem;
      border: 1px solid var(--border-primary);
    }
    
    .tab {
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--text-secondary);
      background: transparent;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      flex: 1;
      text-align: center;
    }
    
    .tab:hover { color: var(--text-primary); }
    
    .tab.active {
      background: var(--brand-primary);
      color: white;
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
    }
    
    /* â”€â”€ Metric pill â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .metric-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.375rem 0.75rem;
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
    }
    
    .metric-pill.positive {
      background: rgba(16, 185, 129, 0.1);
      color: var(--brand-success);
      border: 1px solid rgba(16, 185, 129, 0.2);
    }
    
    .metric-pill.negative {
      background: rgba(239, 68, 68, 0.1);
      color: var(--brand-danger);
      border: 1px solid rgba(239, 68, 68, 0.2);
    }
    
    .metric-pill.neutral {
      background: rgba(99, 102, 241, 0.1);
      color: var(--brand-primary);
      border: 1px solid rgba(99, 102, 241, 0.2);
    }
    
    /* â”€â”€ Divider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .divider {
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--border-primary), transparent);
      margin: 2rem 0;
    }
    
    /* â”€â”€ Tooltip â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .tooltip-wrapper {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .tooltip-icon {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--border-primary);
      color: var(--text-muted);
      font-size: 0.6rem;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: help;
    }
    
    .tooltip-wrapper:hover .tooltip-content {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }
    
    .tooltip-content {
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%) translateY(5px);
      background: var(--bg-elevated);
      border: 1px solid var(--border-primary);
      border-radius: var(--radius-sm);
      padding: 0.5rem 0.75rem;
      font-size: 0.72rem;
      color: var(--text-secondary);
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
      z-index: 10;
      box-shadow: var(--shadow-lg);
      max-width: 250px;
      white-space: normal;
    }
    
    /* â”€â”€ Chart Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .chart-container {
      background: var(--bg-card);
      border: 1px solid var(--border-primary);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      margin: 1rem 0;
    }
    
    .chart-bar {
      height: 8px;
      border-radius: 4px;
      background: var(--border-primary);
      overflow: hidden;
      margin: 0.5rem 0;
    }
    
    .chart-bar-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
      background: linear-gradient(90deg, var(--brand-primary), var(--brand-accent));
    }
    
    /* â”€â”€ Sensitivity Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sensitivity-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
    }
    
    .sensitivity-table th {
      background: var(--bg-elevated);
      color: var(--text-secondary);
      font-weight: 600;
      padding: 0.625rem 0.75rem;
      text-align: center;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border-bottom: 1px solid var(--border-primary);
    }
    
    .sensitivity-table th:first-child {
      border-radius: var(--radius-sm) 0 0 0;
      text-align: left;
    }
    
    .sensitivity-table th:last-child {
      border-radius: 0 var(--radius-sm) 0 0;
    }
    
    .sensitivity-table td {
      padding: 0.5rem 0.75rem;
      text-align: center;
      border-bottom: 1px solid var(--border-primary);
      transition: background 0.2s ease;
    }
    
    .sensitivity-table td:first-child {
      text-align: left;
      font-weight: 600;
      color: var(--text-secondary);
    }
    
    .sensitivity-table tr:hover td {
      background: rgba(99, 102, 241, 0.05);
    }
    
    .sensitivity-table .highlight {
      background: rgba(99, 102, 241, 0.1);
      font-weight: 700;
      color: var(--brand-primary);
    }
    
    .sensitivity-table .positive-val { color: var(--brand-success); }
    .sensitivity-table .negative-val { color: var(--brand-danger); }
    
    /* â”€â”€ Notification Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      z-index: 200;
      background: var(--bg-elevated);
      border: 1px solid var(--border-primary);
      border-radius: var(--radius-md);
      padding: 1rem 1.5rem;
      box-shadow: var(--shadow-xl);
      animation: slideInRight 0.4s ease both;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 0.85rem;
    }
    
    .toast.hidden { display: none; }
    
    /* â”€â”€ Page transitions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page { display: none; }
    .page.active { display: block; animation: fadeIn 0.4s ease both; }
    
    /* â”€â”€ Intersection Observer reveals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .reveal {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .reveal.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* â”€â”€ Noise overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .noise::before {
      content: '';
      position: fixed;
      inset: 0;
      opacity: 0.015;
      pointer-events: none;
      z-index: 1000;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    }
    
    /* â”€â”€ Gradient border card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .gradient-border-card {
      position: relative;
      border-radius: var(--radius-xl);
      padding: 1px;
      background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary), var(--brand-accent));
      background-size: 200% 200%;
      animation: gradient-shift 6s ease infinite;
    }
    
    .gradient-border-card-inner {
      background: var(--bg-card);
      border-radius: calc(var(--radius-xl) - 1px);
      padding: var(--space-xl);
    }
    
    /* â”€â”€ Accordion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .accordion-item {
      border: 1px solid var(--border-primary);
      border-radius: var(--radius-md);
      margin-bottom: 0.5rem;
      overflow: hidden;
    }
    
    .accordion-header {
      padding: 1rem 1.25rem;
      background: var(--bg-card);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-weight: 600;
      font-size: 0.9rem;
      transition: background 0.3s ease;
    }
    
    .accordion-header:hover { background: var(--bg-card-hover); }
    
    .accordion-arrow {
      transition: transform 0.3s ease;
      color: var(--text-muted);
    }
    
    .accordion-item.open .accordion-arrow {
      transform: rotate(180deg);
    }
    
    .accordion-body {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease;
    }
    
    .accordion-item.open .accordion-body {
      max-height: 2000px;
    }
    
    .accordion-body-inner {
      padding: 1rem 1.25rem;
      border-top: 1px solid var(--border-primary);
    }
    
    /* â”€â”€ How It Works â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .how-it-works-steps {
      display: flex;
      align-items: flex-start;
      justify-content: center;
      gap: 0;
      position: relative;
      padding: 2rem 0;
    }
    .how-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      flex: 1;
      max-width: 260px;
      position: relative;
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .how-step.visible { opacity: 1; transform: translateY(0); }
    .how-step:nth-child(2) { transition-delay: 0.15s; }
    .how-step:nth-child(3) { transition-delay: 0.3s; }
    .how-step-num {
      width: 64px; height: 64px; border-radius: 50%;
      background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary));
      color: white; font-size: 1.5rem; font-weight: 800;
      display: flex; align-items: center; justify-content: center;
      position: relative; z-index: 2;
      box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
    }
    .how-step h3 { font-size: 1.05rem; margin: 1rem 0 0.5rem; }
    .how-step p { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6; }
    .how-connector {
      position: absolute; top: 32px; left: calc(50% + 32px); right: calc(-50% + 32px);
      height: 2px;
      background: linear-gradient(90deg, var(--brand-primary), var(--brand-accent));
      opacity: 0.3; z-index: 1;
    }
    .how-step:last-child .how-connector { display: none; }
    @media (max-width: 640px) {
      .how-it-works-steps { flex-direction: column; align-items: center; gap: 2rem; }
      .how-connector { display: none; }
    }

    /* â”€â”€ Testimonials â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .testimonial-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }
    .testimonial-card {
      background: var(--glass-bg);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-xl);
      padding: var(--space-xl);
      transition: all 0.3s ease;
    }
    .testimonial-card:hover {
      border-color: var(--border-hover);
      box-shadow: var(--shadow-lg), var(--shadow-glow);
      transform: translateY(-2px);
    }
    .testimonial-stars { color: #f59e0b; font-size: 0.9rem; margin-bottom: 0.75rem; }
    .testimonial-quote { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.7; margin-bottom: 1.25rem; font-style: italic; }
    .testimonial-author { display: flex; align-items: center; gap: 0.75rem; }
    .testimonial-avatar {
      width: 40px; height: 40px; border-radius: 50%;
      background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary));
      color: white; font-weight: 700; font-size: 0.8rem;
      display: flex; align-items: center; justify-content: center;
    }
    .testimonial-name { font-size: 0.85rem; font-weight: 600; }
    .testimonial-role { font-size: 0.72rem; color: var(--text-muted); }

    /* â”€â”€ Newsletter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .newsletter-section {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(139, 92, 246, 0.05));
      border: 1px solid rgba(99, 102, 241, 0.15);
      border-radius: var(--radius-xl);
      padding: var(--space-3xl) var(--space-xl);
      text-align: center;
      max-width: 640px;
      margin: 0 auto;
    }
    .newsletter-form {
      display: flex; gap: 0.5rem; max-width: 420px; margin: 1.5rem auto 0;
    }
    .newsletter-form input {
      flex: 1; padding: 0.75rem 1rem; border-radius: var(--radius-md);
      border: 1px solid var(--border-primary); background: var(--bg-secondary);
      color: var(--text-primary); font-size: 0.9rem; font-family: inherit;
    }
    .newsletter-form input:focus { outline: none; border-color: var(--brand-primary); box-shadow: 0 0 0 3px rgba(99,102,241,0.15); }
    .newsletter-social-proof { font-size: 0.75rem; color: var(--text-muted); margin-top: 0.75rem; }
    @media (max-width: 480px) { .newsletter-form { flex-direction: column; } }

    /* â”€â”€ FAQ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .faq-list { max-width: 720px; margin: 0 auto; }

    /* â”€â”€ Cookie Banner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .cookie-banner {
      position: fixed; bottom: 0; left: 0; right: 0; z-index: 300;
      background: var(--bg-elevated);
      border-top: 1px solid var(--border-primary);
      padding: 1rem 1.5rem;
      display: flex; align-items: center; justify-content: center; gap: 1rem;
      font-size: 0.85rem; color: var(--text-secondary);
      animation: fadeInUp 0.4s ease both;
      box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
    }
    .cookie-banner.hidden { display: none; }
    .cookie-banner-btns { display: flex; gap: 0.5rem; }
    @media (max-width: 640px) {
      .cookie-banner { flex-direction: column; text-align: center; gap: 0.75rem; }
    }

    /* â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .toast-success {
      position: fixed; bottom: 2rem; right: 2rem; z-index: 400;
      background: var(--bg-elevated); border: 1px solid rgba(16,185,129,0.3);
      border-radius: var(--radius-md); padding: 1rem 1.5rem;
      box-shadow: var(--shadow-xl); animation: slideInRight 0.4s ease both;
      font-size: 0.85rem; color: var(--brand-success); display: flex; align-items: center; gap: 0.5rem;
    }

    /* â”€â”€ Progress Ring â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .progress-ring {
      transform: rotate(-90deg);
    }
    
    .progress-ring-bg {
      stroke: var(--border-primary);
      fill: none;
    }
    
    .progress-ring-fill {
      fill: none;
      stroke-linecap: round;
      transition: stroke-dashoffset 1.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Affiliate CTA banners */
    .affiliate-cta {
      margin-top: 1rem;
      padding: 0.75rem 1rem;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-md);
      backdrop-filter: blur(12px);
      font-size: 0.8rem;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .affiliate-cta .ad-label {
      font-size: 0.6rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      border: 1px solid var(--border-primary);
      padding: 0.1rem 0.35rem;
      border-radius: 3px;
      flex-shrink: 0;
    }
    .affiliate-cta a {
      color: var(--brand-accent);
      text-decoration: none;
      font-weight: 500;
    }
    .affiliate-cta a:hover { text-decoration: underline; }
  </style>
</head>
<body class="noise">
  <!-- Navigation -->
  <nav class="nav-bar" id="navbar">
    <div class="nav-inner">
      <a href="#" class="nav-logo" onclick="showPage('home'); return false;">
        <div class="nav-logo-icon">B</div>
        <span>Babaganoush</span>
      </a>
      
      <ul class="nav-links" id="nav-links">
        <li><a href="#tools" onclick="showPage('home')">Tools</a></li>
        <li><a href="#" onclick="showPage('valuation'); return false;">Valuation</a></li>
        <li><a href="#" onclick="showPage('mortgage'); return false;">Mortgage</a></li>
        <li><a href="#" onclick="showPage('investment'); return false;">Investment</a></li>
        <li><a href="#" onclick="showPage('retirement'); return false;">Retirement</a></li>
        <li><a href="#" onclick="showPage('compound'); return false;">Compound</a></li>
      </ul>
      
      <div class="nav-actions">
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">ğŸŒ™</button>
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Menu">â˜°</button>
      </div>
    </div>
  </nav>
  
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HOME PAGE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page active" id="page-home">
    
    <!-- Hero -->
    <section class="hero" id="hero">
      <div class="hero-bg">
        <div class="hero-blob hero-blob-1"></div>
        <div class="hero-blob hero-blob-2"></div>
        <div class="hero-blob hero-blob-3"></div>
        <div class="hero-grid"></div>
      </div>
      
      <div class="hero-content">
        <div class="hero-badge">
          <span class="pulse-dot"></span>
          Free Forever Â· No Sign-up Required
        </div>
        
        <h1>
          Financial tools that<br />
          <span class="gradient-text">actually make sense</span>
        </h1>
        
        <p>
          Professional-grade calculators for business valuation, M&A analysis, 
          mortgage planning, and investment returns. Built by finance professionals 
          with 15+ years of experience.
        </p>
        
        <div class="hero-cta">
          <a href="#tools" class="btn btn-primary btn-lg">
            Explore Tools â†’
          </a>
          <a href="#about" class="btn btn-secondary btn-lg">
            Learn More
          </a>
        </div>
        
        <div class="hero-stats">
          <div class="hero-stat">
            <div class="hero-stat-value" data-count="8">0</div>
            <div class="hero-stat-label">Free Tools</div>
          </div>
          <div class="hero-stat">
            <div class="hero-stat-value" data-count="100">0</div>
            <div class="hero-stat-label">Calculations / Day</div>
          </div>
          <div class="hero-stat">
            <div class="hero-stat-value">$0</div>
            <div class="hero-stat-label">Cost â€” Always Free</div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- How It Works -->
    <section class="section" style="padding-bottom: 2rem;">
      <div class="section-header reveal">
        <div class="section-label">
          <span class="label-line"></span>
          How It Works
          <span class="label-line"></span>
        </div>
        <h2 class="section-title">Three steps to <span class="gradient-text">smarter decisions</span></h2>
        <p class="section-desc">No accounts, no downloads, no complexity. Just answers.</p>
      </div>
      <div class="how-it-works-steps">
        <div class="how-step reveal">
          <div class="how-connector"></div>
          <div class="how-step-num">1</div>
          <h3>Choose a tool</h3>
          <p>Pick from 8 professional-grade calculators covering valuation, M&A, mortgage, and more.</p>
        </div>
        <div class="how-step reveal">
          <div class="how-connector"></div>
          <div class="how-step-num">2</div>
          <h3>Enter your numbers</h3>
          <p>Fill in the inputs with your data. Smart defaults help you get started instantly.</p>
        </div>
        <div class="how-step reveal">
          <div class="how-step-num">3</div>
          <h3>Get instant results</h3>
          <p>See real-time calculations, sensitivity tables, and visual breakdowns â€” all in your browser.</p>
        </div>
      </div>
    </section>

    <!-- Tools Grid -->
    <section class="section" id="tools">
      <div class="section-header reveal">
        <div class="section-label">
          <span class="label-line"></span>
          Calculator Suite
          <span class="label-line"></span>
        </div>
        <h2 class="section-title">Everything you need, <span class="gradient-text">all in one place</span></h2>
        <p class="section-desc">Professional financial calculators that would cost hundreds at a consulting firm. Free, instant, private.</p>
      </div>
      
      <div class="tools-grid">
        <!-- Business Valuation -->
        <div class="tool-card reveal" onclick="showPage('valuation')" role="button" tabindex="0" aria-label="Business Valuation Calculator">
          <div class="tool-icon" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(99, 102, 241, 0.05));">ğŸ¢</div>
          <h3 style="font-size: 1.1rem; margin: 0.75rem 0 0.5rem;">Business Valuation</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">DCF, multiples, and asset-based valuation. Perfect for M&A, fundraising, and exit planning.</p>
          <div style="display: flex; gap: 0.375rem; margin-top: 1rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">DCF</span>
            <span class="metric-pill neutral">Multiples</span>
            <span class="metric-pill neutral">Asset</span>
          </div>
        </div>
        
        <!-- M&A Analyzer -->
        <div class="tool-card reveal" onclick="showPage('merger')" role="button" tabindex="0" aria-label="M&A Deal Analyzer">
          <div class="tool-icon" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(139, 92, 246, 0.05));">ğŸ¤</div>
          <h3 style="font-size: 1.1rem; margin: 0.75rem 0 0.5rem;">M&A Deal Analyzer</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">Accretion/dilution analysis, synergy valuation, and deal structure optimization.</p>
          <div style="display: flex; gap: 0.375rem; margin-top: 1rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">EPS Impact</span>
            <span class="metric-pill neutral">Synergies</span>
          </div>
        </div>
        
        <!-- Mortgage Calculator -->
        <div class="tool-card reveal" onclick="showPage('mortgage')" role="button" tabindex="0" aria-label="Canadian Mortgage Calculator">
          <div class="tool-icon" style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(6, 182, 212, 0.05));">ğŸ </div>
          <h3 style="font-size: 1.1rem; margin: 0.75rem 0 0.5rem;">Canadian Mortgage</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">Mortgage payments with OSFI stress test, land transfer tax, and amortization schedule.</p>
          <div style="display: flex; gap: 0.375rem; margin-top: 1rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">Stress Test</span>
            <span class="metric-pill neutral">ğŸ‡¨ğŸ‡¦ Canada</span>
          </div>
        </div>
        
        <!-- Investment Returns -->
        <div class="tool-card reveal" onclick="showPage('investment')" role="button" tabindex="0" aria-label="Investment Returns Calculator">
          <div class="tool-icon" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.05));">ğŸ“ˆ</div>
          <h3 style="font-size: 1.1rem; margin: 0.75rem 0 0.5rem;">Investment Returns</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">CAGR calculator, dollar-cost averaging simulator, and portfolio growth projections.</p>
          <div style="display: flex; gap: 0.375rem; margin-top: 1rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">CAGR</span>
            <span class="metric-pill neutral">DCA</span>
          </div>
        </div>
        
        <!-- RRSP vs TFSA -->
        <div class="tool-card reveal" onclick="showPage('retirement')" role="button" tabindex="0" aria-label="RRSP vs TFSA Optimizer">
          <div class="tool-icon" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(245, 158, 11, 0.05));">ğŸ¦</div>
          <h3 style="font-size: 1.1rem; margin: 0.75rem 0 0.5rem;">RRSP vs TFSA</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">Optimize your Canadian retirement strategy. Compare tax-sheltered growth scenarios.</p>
          <div style="display: flex; gap: 0.375rem; margin-top: 1rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">RRSP</span>
            <span class="metric-pill neutral">TFSA</span>
            <span class="metric-pill neutral">ğŸ‡¨ğŸ‡¦</span>
          </div>
        </div>
        
        <!-- Compound Interest -->
        <div class="tool-card reveal" onclick="showPage('compound')" role="button" tabindex="0" aria-label="Compound Interest Visualizer">
          <div class="tool-icon" style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(236, 72, 153, 0.05));">ğŸ“Š</div>
          <h3 style="font-size: 1.1rem; margin: 0.75rem 0 0.5rem;">Compound Interest</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">Visualize the power of compound growth. See how small contributions become fortunes.</p>
          <div style="display: flex; gap: 0.375rem; margin-top: 1rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">Visual</span>
            <span class="metric-pill neutral">Chart</span>
          </div>
        </div>
        
        <!-- Startup Runway -->
        <div class="tool-card reveal" onclick="showPage('runway')" role="button" tabindex="0" aria-label="Startup Runway Calculator">
          <div class="tool-icon" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(168, 85, 247, 0.05));">ğŸš€</div>
          <h3 style="font-size: 1.1rem; margin: 0.75rem 0 0.5rem;">Startup Runway</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">Calculate your burn rate, runway, and when you need to raise. Scenario planning included.</p>
          <div style="display: flex; gap: 0.375rem; margin-top: 1rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">Burn Rate</span>
            <span class="metric-pill neutral">Runway</span>
          </div>
        </div>
        
        <!-- Net Worth -->
        <div class="tool-card reveal" onclick="showPage('networth')" role="button" tabindex="0" aria-label="Net Worth Tracker">
          <div class="tool-icon" style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(34, 197, 94, 0.05));">ğŸ’°</div>
          <h3 style="font-size: 1.1rem; margin: 0.75rem 0 0.5rem;">Net Worth Tracker</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">Track assets vs liabilities. See your complete financial picture with visual breakdowns.</p>
          <div style="display: flex; gap: 0.375rem; margin-top: 1rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">Assets</span>
            <span class="metric-pill neutral">Liabilities</span>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Why Section -->
    <section class="section" id="about">
      <div class="section-header reveal">
        <div class="section-label">
          <span class="label-line"></span>
          Why Babaganoush
          <span class="label-line"></span>
        </div>
        <h2 class="section-title">Built different</h2>
        <p class="section-desc">Financial tools built by someone who's spent 15+ years actually doing deals, not just building software.</p>
      </div>
      
      <div class="tools-grid" style="grid-template-columns: repeat(3, 1fr);">
        <div class="glass-card reveal" style="padding: var(--space-xl); text-align: center;">
          <div style="font-size: 2rem; margin-bottom: 1rem;">ğŸ”’</div>
          <h3 style="font-size: 1rem; margin-bottom: 0.5rem;">100% Private</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary);">All calculations run in your browser. Your data never leaves your device.</p>
        </div>
        <div class="glass-card reveal" style="padding: var(--space-xl); text-align: center;">
          <div style="font-size: 2rem; margin-bottom: 1rem;">âš¡</div>
          <h3 style="font-size: 1rem; margin-bottom: 0.5rem;">Instant Results</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary);">No loading, no servers. Calculations happen in real-time as you type.</p>
        </div>
        <div class="glass-card reveal" style="padding: var(--space-xl); text-align: center;">
          <div style="font-size: 2rem; margin-bottom: 1rem;">ğŸ“</div>
          <h3 style="font-size: 1rem; margin-bottom: 0.5rem;">IB-Grade Models</h3>
          <p style="font-size: 0.85rem; color: var(--text-secondary);">Same methodologies used at bulge bracket banks and top PE firms.</p>
        </div>
      </div>
    </section>
    
    <!-- Testimonials -->
    <section class="section">
      <div class="section-header reveal">
        <div class="section-label">
          <span class="label-line"></span>
          Testimonials
          <span class="label-line"></span>
        </div>
        <h2 class="section-title">Trusted by <span class="gradient-text">finance professionals</span></h2>
        <p class="section-desc">Join thousands who make better financial decisions with our tools.</p>
      </div>
      <div class="testimonial-grid">
        <div class="testimonial-card reveal">
          <div class="testimonial-stars">â˜…â˜…â˜…â˜…â˜…</div>
          <p class="testimonial-quote">"The DCF calculator saved me hours on my capstone project. The sensitivity analysis is exactly what we use in our investment banking case studies â€” but faster and more intuitive."</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">SK</div>
            <div>
              <div class="testimonial-name">Sarah K.</div>
              <div class="testimonial-role">MBA Student</div>
            </div>
          </div>
        </div>
        <div class="testimonial-card reveal">
          <div class="testimonial-stars">â˜…â˜…â˜…â˜…â˜…</div>
          <p class="testimonial-quote">"I screened over 30 acquisition targets using the business valuation tool. The multiples-based approach gave me quick sanity checks before diving into full due diligence."</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">MT</div>
            <div>
              <div class="testimonial-name">Michael T.</div>
              <div class="testimonial-role">Search Fund Entrepreneur</div>
            </div>
          </div>
        </div>
        <div class="testimonial-card reveal">
          <div class="testimonial-stars">â˜…â˜…â˜…â˜…â˜…</div>
          <p class="testimonial-quote">"I use the RRSP vs TFSA optimizer with every client meeting. Being able to show real-time scenarios on their own numbers builds instant trust and saves me 20 minutes per session."</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">PR</div>
            <div>
              <div class="testimonial-name">Priya R.</div>
              <div class="testimonial-role">Financial Advisor</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="section">
      <div class="section-header reveal">
        <div class="section-label">
          <span class="label-line"></span>
          FAQ
          <span class="label-line"></span>
        </div>
        <h2 class="section-title">Frequently asked <span class="gradient-text">questions</span></h2>
      </div>
      <div class="faq-list">
        <div class="accordion-item reveal">
          <div class="accordion-header" onclick="this.parentElement.classList.toggle('open')">
            <span>Are these tools really free?</span>
            <span class="accordion-arrow">â–¼</span>
          </div>
          <div class="accordion-body"><div class="accordion-body-inner" style="color:var(--text-secondary);font-size:0.9rem;line-height:1.7;">Yes, forever. All core calculators are completely free with no sign-up required. We monetize through optional premium exports â€” PDF reports and Excel downloads coming soon.</div></div>
        </div>
        <div class="accordion-item reveal">
          <div class="accordion-header" onclick="this.parentElement.classList.toggle('open')">
            <span>Is my data safe?</span>
            <span class="accordion-arrow">â–¼</span>
          </div>
          <div class="accordion-body"><div class="accordion-body-inner" style="color:var(--text-secondary);font-size:0.9rem;line-height:1.7;">Absolutely. All calculations run locally in your browser. We never see your numbers, and nothing is sent to any server. Your financial data stays on your device.</div></div>
        </div>
        <div class="accordion-item reveal">
          <div class="accordion-header" onclick="this.parentElement.classList.toggle('open')">
            <span>How accurate are the calculations?</span>
            <span class="accordion-arrow">â–¼</span>
          </div>
          <div class="accordion-body"><div class="accordion-body-inner" style="color:var(--text-secondary);font-size:0.9rem;line-height:1.7;">We use the same methodologies as investment banks and PE firms. Our DCF, accretion/dilution, and valuation models follow industry-standard formulas used in professional deal analysis.</div></div>
        </div>
        <div class="accordion-item reveal">
          <div class="accordion-header" onclick="this.parentElement.classList.toggle('open')">
            <span>Can I export results?</span>
            <span class="accordion-arrow">â–¼</span>
          </div>
          <div class="accordion-body"><div class="accordion-body-inner" style="color:var(--text-secondary);font-size:0.9rem;line-height:1.7;">PDF and Excel exports are coming soon for premium users. You'll be able to generate presentation-ready reports with a single click.</div></div>
        </div>
        <div class="accordion-item reveal">
          <div class="accordion-header" onclick="this.parentElement.classList.toggle('open')">
            <span>Who built this?</span>
            <span class="accordion-arrow">â–¼</span>
          </div>
          <div class="accordion-body"><div class="accordion-body-inner" style="color:var(--text-secondary);font-size:0.9rem;line-height:1.7;">Finance professionals with 15+ years of M&A and corporate development experience. We built the tools we wished existed when we were doing deals.</div></div>
        </div>
      </div>
    </section>

    <!-- Newsletter -->
    <section class="section">
      <div class="newsletter-section reveal">
        <div style="font-size: 2rem; margin-bottom: 0.75rem;">ğŸ“¬</div>
        <h2 style="font-size: 1.5rem; margin-bottom: 0.5rem;">Get weekly financial insights</h2>
        <p style="color: var(--text-secondary); font-size: 0.9rem;">Valuation frameworks, deal analysis tips, and new tool updates â€” straight to your inbox.</p>
        <div class="newsletter-form" id="newsletter-form">
          <input type="email" id="newsletter-email" placeholder="you@company.com" aria-label="Email address" />
          <button class="btn btn-primary" onclick="subscribeNewsletter()">Subscribe</button>
        </div>
        <p class="newsletter-social-proof">âœ“ Join 2,000+ finance professionals Â· No spam, ever</p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-brand gradient-text">Babaganoush</div>
        <p class="footer-text">
          Smart financial tools built by finance professionals. All calculations are for educational and informational purposes only. Not financial advice.
        </p>
        <div class="footer-links">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Use</a>
          <a href="#">Contact</a>
          <a href="https://github.com/rajkcho/Babaganoush" target="_blank">GitHub</a>
        </div>
        <p style="font-size: 0.72rem; color: var(--text-muted); margin-top: 1.5rem;">Â© 2026 Babaganoush. Made in ğŸ‡¨ğŸ‡¦ Canada.</p>
      </div>
    </footer>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BUSINESS VALUATION PAGE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-valuation">
    <div class="calc-container" style="padding-top: 6rem;">
      <div class="calc-back" onclick="showPage('home')">â† Back to Tools</div>
      
      <div class="calc-header animate-fade-up">
        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ğŸ¢</div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Business Valuation Calculator</h1>
        <p style="color: var(--text-secondary); max-width: 500px; margin: 0 auto;">Estimate business value using DCF, comparable multiples, and asset-based approaches.</p>
      </div>
      
      <!-- Method Tabs -->
      <div class="tabs" style="max-width: 400px; margin: 2rem auto;" id="val-tabs">
        <button class="tab active" onclick="switchValTab('dcf')">DCF</button>
        <button class="tab" onclick="switchValTab('multiples')">Multiples</button>
        <button class="tab" onclick="switchValTab('asset')">Asset-Based</button>
      </div>
      
      <!-- DCF Method -->
      <div id="val-dcf" class="animate-fade-up" style="margin-top: 2rem;">
        <div class="calc-grid">
          <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
            <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Assumptions</h3>
            
            <div class="input-group">
              <label>
                Annual Free Cash Flow (FCF)
                <span class="tooltip-wrapper">
                  <span class="tooltip-icon">?</span>
                  <span class="tooltip-content">Net cash generated by the business after all operating expenses and capital expenditures</span>
                </span>
              </label>
              <input type="number" id="dcf-fcf" value="1000000" placeholder="1,000,000" oninput="calculateDCF()" />
              <span class="input-help">Current annual free cash flow ($)</span>
            </div>
            
            <div class="input-group">
              <label>
                Growth Rate (Year 1-5)
                <span class="tooltip-wrapper">
                  <span class="tooltip-icon">?</span>
                  <span class="tooltip-content">Expected annual growth rate for the projection period</span>
                </span>
              </label>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="range" id="dcf-growth" min="0" max="30" value="10" step="0.5" oninput="calculateDCF(); document.getElementById('dcf-growth-val').textContent = this.value + '%'" />
                <span id="dcf-growth-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right; color: var(--brand-primary);">10%</span>
              </div>
            </div>
            
            <div class="input-group">
              <label>
                Terminal Growth Rate
                <span class="tooltip-wrapper">
                  <span class="tooltip-icon">?</span>
                  <span class="tooltip-content">Long-term sustainable growth rate (typically 2-3%, matching GDP growth)</span>
                </span>
              </label>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="range" id="dcf-terminal" min="0" max="5" value="2.5" step="0.25" oninput="calculateDCF(); document.getElementById('dcf-terminal-val').textContent = this.value + '%'" />
                <span id="dcf-terminal-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right; color: var(--brand-accent);">2.5%</span>
              </div>
            </div>
            
            <div class="input-group">
              <label>
                Discount Rate (WACC)
                <span class="tooltip-wrapper">
                  <span class="tooltip-icon">?</span>
                  <span class="tooltip-content">Weighted Average Cost of Capital â€” the required rate of return for investors</span>
                </span>
              </label>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="range" id="dcf-wacc" min="5" max="25" value="12" step="0.5" oninput="calculateDCF(); document.getElementById('dcf-wacc-val').textContent = this.value + '%'" />
                <span id="dcf-wacc-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right; color: var(--brand-warning);">12%</span>
              </div>
            </div>
            
            <div class="input-group">
              <label>Projection Years</label>
              <select id="dcf-years" onchange="calculateDCF()">
                <option value="5" selected>5 Years</option>
                <option value="7">7 Years</option>
                <option value="10">10 Years</option>
              </select>
            </div>
            
            <div class="input-group">
              <label>Net Debt</label>
              <input type="number" id="dcf-debt" value="0" placeholder="0" oninput="calculateDCF()" />
              <span class="input-help">Total debt minus cash (negative = net cash position)</span>
            </div>
          </div>
          
          <div class="calc-results" id="dcf-results">
            <!-- Results populated by JS -->
          </div>
        </div>
        
        <!-- DCF Sensitivity Table -->
        <div class="chart-container" style="margin-top: 2rem;" id="dcf-sensitivity">
          <!-- Populated by JS -->
        </div>
        
        <!-- FCF Projection Chart -->
        <div class="chart-container" style="margin-top: 1rem;" id="dcf-chart">
          <!-- Populated by JS -->
        </div>
      </div>
      
      <!-- Multiples Method -->
      <div id="val-multiples" style="display: none; margin-top: 2rem;">
        <div class="calc-grid">
          <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
            <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Company Metrics</h3>
            
            <div class="input-group">
              <label>Annual Revenue</label>
              <input type="number" id="mult-revenue" value="5000000" oninput="calculateMultiples()" />
            </div>
            
            <div class="input-group">
              <label>EBITDA</label>
              <input type="number" id="mult-ebitda" value="1200000" oninput="calculateMultiples()" />
            </div>
            
            <div class="input-group">
              <label>Net Income</label>
              <input type="number" id="mult-income" value="800000" oninput="calculateMultiples()" />
            </div>
            
            <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin: 1.5rem 0 1rem;">Industry Multiples</h3>
            
            <div class="input-group">
              <label>EV/Revenue Multiple</label>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="range" id="mult-ev-rev" min="0.5" max="15" value="3" step="0.25" oninput="calculateMultiples(); document.getElementById('mult-ev-rev-val').textContent = this.value + 'x'" />
                <span id="mult-ev-rev-val" class="mono" style="font-size: 0.85rem; min-width: 3rem; text-align: right;">3x</span>
              </div>
            </div>
            
            <div class="input-group">
              <label>EV/EBITDA Multiple</label>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="range" id="mult-ev-ebitda" min="3" max="25" value="10" step="0.5" oninput="calculateMultiples(); document.getElementById('mult-ev-ebitda-val').textContent = this.value + 'x'" />
                <span id="mult-ev-ebitda-val" class="mono" style="font-size: 0.85rem; min-width: 3rem; text-align: right;">10x</span>
              </div>
            </div>
            
            <div class="input-group">
              <label>P/E Multiple</label>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="range" id="mult-pe" min="5" max="40" value="15" step="0.5" oninput="calculateMultiples(); document.getElementById('mult-pe-val').textContent = this.value + 'x'" />
                <span id="mult-pe-val" class="mono" style="font-size: 0.85rem; min-width: 3rem; text-align: right;">15x</span>
              </div>
            </div>
          </div>
          
          <div class="calc-results" id="multiples-results">
            <!-- Results populated by JS -->
          </div>
        </div>
      </div>
      
      <!-- Asset-Based Method -->
      <div id="val-asset" style="display: none; margin-top: 2rem;">
        <div class="calc-grid">
          <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
            <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Assets</h3>
            
            <div class="input-group">
              <label>Cash & Equivalents</label>
              <input type="number" id="asset-cash" value="500000" oninput="calculateAsset()" />
            </div>
            <div class="input-group">
              <label>Accounts Receivable</label>
              <input type="number" id="asset-ar" value="300000" oninput="calculateAsset()" />
            </div>
            <div class="input-group">
              <label>Inventory</label>
              <input type="number" id="asset-inv" value="200000" oninput="calculateAsset()" />
            </div>
            <div class="input-group">
              <label>Property & Equipment</label>
              <input type="number" id="asset-ppe" value="1000000" oninput="calculateAsset()" />
            </div>
            <div class="input-group">
              <label>Other Assets</label>
              <input type="number" id="asset-other" value="150000" oninput="calculateAsset()" />
            </div>
            
            <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin: 1.5rem 0 1rem;">Liabilities</h3>
            
            <div class="input-group">
              <label>Accounts Payable</label>
              <input type="number" id="asset-ap" value="200000" oninput="calculateAsset()" />
            </div>
            <div class="input-group">
              <label>Loans & Debt</label>
              <input type="number" id="asset-debt" value="400000" oninput="calculateAsset()" />
            </div>
            <div class="input-group">
              <label>Other Liabilities</label>
              <input type="number" id="asset-otherliab" value="100000" oninput="calculateAsset()" />
            </div>
          </div>
          
          <div class="calc-results" id="asset-results">
            <!-- Results populated by JS -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MORTGAGE CALCULATOR PAGE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-mortgage">
    <div class="calc-container" style="padding-top: 6rem;">
      <div class="calc-back" onclick="showPage('home')">â† Back to Tools</div>
      
      <div class="calc-header animate-fade-up">
        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ğŸ </div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Canadian Mortgage Calculator</h1>
        <p style="color: var(--text-secondary); max-width: 500px; margin: 0 auto;">Calculate payments with OSFI stress test, land transfer tax, and complete amortization schedule.</p>
      </div>
      
      <div class="calc-grid" style="margin-top: 2rem;">
        <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
          <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Mortgage Details</h3>
          
          <div class="input-group">
            <label>Home Price</label>
            <input type="number" id="mort-price" value="800000" oninput="calculateMortgage()" />
          </div>
          
          <div class="input-group">
            <label>Down Payment (%)</label>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <input type="range" id="mort-down" min="5" max="50" value="20" step="1" oninput="calculateMortgage(); document.getElementById('mort-down-val').textContent = this.value + '%'" />
              <span id="mort-down-val" class="mono" style="font-size: 0.85rem; min-width: 3rem; text-align: right;">20%</span>
            </div>
            <span class="input-help" id="mort-down-help">Down payment: $160,000</span>
          </div>
          
          <div class="input-group">
            <label>Interest Rate (%)</label>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <input type="range" id="mort-rate" min="1" max="10" value="5.5" step="0.05" oninput="calculateMortgage(); document.getElementById('mort-rate-val').textContent = this.value + '%'" />
              <span id="mort-rate-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right;">5.5%</span>
            </div>
          </div>
          
          <div class="input-group">
            <label>Amortization Period</label>
            <select id="mort-amort" onchange="calculateMortgage()">
              <option value="25" selected>25 Years</option>
              <option value="30">30 Years</option>
              <option value="20">20 Years</option>
              <option value="15">15 Years</option>
            </select>
          </div>
          
          <div class="input-group">
            <label>Payment Frequency</label>
            <select id="mort-freq" onchange="calculateMortgage()">
              <option value="12" selected>Monthly</option>
              <option value="26">Bi-Weekly</option>
              <option value="52">Weekly</option>
              <option value="24">Semi-Monthly</option>
            </select>
          </div>
          
          <div class="input-group">
            <label>Province</label>
            <select id="mort-province" onchange="calculateMortgage()">
              <option value="ON" selected>Ontario</option>
              <option value="BC">British Columbia</option>
              <option value="AB">Alberta</option>
              <option value="QC">Quebec</option>
              <option value="MB">Manitoba</option>
              <option value="SK">Saskatchewan</option>
              <option value="NS">Nova Scotia</option>
              <option value="NB">New Brunswick</option>
              <option value="NL">Newfoundland</option>
              <option value="PE">PEI</option>
            </select>
          </div>
        </div>
        
        <div class="calc-results" id="mortgage-results">
          <!-- Results populated by JS -->
        </div>
      </div>
      
      <!-- Stress Test -->
      <div class="chart-container" style="margin-top: 2rem;" id="mortgage-stress">
        <!-- Populated by JS -->
      </div>
      
      <!-- Amortization Schedule -->
      <div class="chart-container" style="margin-top: 1rem;" id="mortgage-amort">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       INVESTMENT RETURNS PAGE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-investment">
    <div class="calc-container" style="padding-top: 6rem;">
      <div class="calc-back" onclick="showPage('home')">â† Back to Tools</div>
      
      <div class="calc-header animate-fade-up">
        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ğŸ“ˆ</div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Investment Returns Calculator</h1>
        <p style="color: var(--text-secondary); max-width: 500px; margin: 0 auto;">Calculate CAGR, simulate dollar-cost averaging, and project portfolio growth over time.</p>
      </div>
      
      <div class="tabs" style="max-width: 300px; margin: 2rem auto;" id="inv-tabs">
        <button class="tab active" onclick="switchInvTab('cagr')">CAGR</button>
        <button class="tab" onclick="switchInvTab('dca')">DCA Sim</button>
      </div>
      
      <!-- CAGR Calculator -->
      <div id="inv-cagr" style="margin-top: 2rem;">
        <div class="calc-grid">
          <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
            <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Investment Details</h3>
            
            <div class="input-group">
              <label>Initial Investment</label>
              <input type="number" id="cagr-initial" value="10000" oninput="calculateCAGR()" />
            </div>
            <div class="input-group">
              <label>Final Value</label>
              <input type="number" id="cagr-final" value="25000" oninput="calculateCAGR()" />
            </div>
            <div class="input-group">
              <label>Time Period (Years)</label>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="range" id="cagr-years" min="1" max="30" value="5" step="1" oninput="calculateCAGR(); document.getElementById('cagr-years-val').textContent = this.value + ' yrs'" />
                <span id="cagr-years-val" class="mono" style="font-size: 0.85rem; min-width: 4rem; text-align: right;">5 yrs</span>
              </div>
            </div>
          </div>
          
          <div class="calc-results" id="cagr-results"></div>
        </div>
      </div>
      
      <!-- DCA Simulator -->
      <div id="inv-dca" style="display: none; margin-top: 2rem;">
        <div class="calc-grid">
          <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
            <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">DCA Parameters</h3>
            
            <div class="input-group">
              <label>Monthly Investment</label>
              <input type="number" id="dca-monthly" value="500" oninput="calculateDCA()" />
            </div>
            <div class="input-group">
              <label>Expected Annual Return (%)</label>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="range" id="dca-return" min="1" max="20" value="8" step="0.5" oninput="calculateDCA(); document.getElementById('dca-return-val').textContent = this.value + '%'" />
                <span id="dca-return-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right;">8%</span>
              </div>
            </div>
            <div class="input-group">
              <label>Investment Period (Years)</label>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="range" id="dca-years" min="1" max="40" value="20" step="1" oninput="calculateDCA(); document.getElementById('dca-years-val').textContent = this.value + ' yrs'" />
                <span id="dca-years-val" class="mono" style="font-size: 0.85rem; min-width: 4rem; text-align: right;">20 yrs</span>
              </div>
            </div>
            <div class="input-group">
              <label>Initial Lump Sum (optional)</label>
              <input type="number" id="dca-initial" value="0" oninput="calculateDCA()" />
            </div>
          </div>
          
          <div class="calc-results" id="dca-results"></div>
        </div>
        
        <div class="chart-container" style="margin-top: 2rem;" id="dca-chart"></div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RRSP vs TFSA PAGE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-retirement">
    <div class="calc-container" style="padding-top: 6rem;">
      <div class="calc-back" onclick="showPage('home')">â† Back to Tools</div>
      
      <div class="calc-header animate-fade-up">
        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ğŸ¦</div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">RRSP vs TFSA Optimizer</h1>
        <p style="color: var(--text-secondary); max-width: 500px; margin: 0 auto;">Compare tax-sheltered strategies and find your optimal Canadian retirement plan.</p>
      </div>
      
      <div class="calc-grid" style="margin-top: 2rem;">
        <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
          <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Your Situation</h3>
          
          <div class="input-group">
            <label>Annual Income</label>
            <input type="number" id="ret-income" value="120000" oninput="calculateRetirement()" />
          </div>
          <div class="input-group">
            <label>Annual Contribution</label>
            <input type="number" id="ret-contribution" value="20000" oninput="calculateRetirement()" />
          </div>
          <div class="input-group">
            <label>Current Age</label>
            <input type="number" id="ret-age" value="35" oninput="calculateRetirement()" />
          </div>
          <div class="input-group">
            <label>Retirement Age</label>
            <input type="number" id="ret-retire-age" value="60" oninput="calculateRetirement()" />
          </div>
          <div class="input-group">
            <label>Expected Annual Return (%)</label>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <input type="range" id="ret-return" min="3" max="12" value="7" step="0.5" oninput="calculateRetirement(); document.getElementById('ret-return-val').textContent = this.value + '%'" />
              <span id="ret-return-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right;">7%</span>
            </div>
          </div>
          <div class="input-group">
            <label>Expected Retirement Income</label>
            <input type="number" id="ret-retire-income" value="60000" oninput="calculateRetirement()" />
            <span class="input-help">Annual income in retirement (for tax bracket comparison)</span>
          </div>
          <div class="input-group">
            <label>Province</label>
            <select id="ret-province" onchange="calculateRetirement()">
              <option value="ON" selected>Ontario</option>
              <option value="BC">British Columbia</option>
              <option value="AB">Alberta</option>
              <option value="QC">Quebec</option>
            </select>
          </div>
        </div>
        
        <div class="calc-results" id="retirement-results"></div>
      </div>
      
      <div class="chart-container" style="margin-top: 2rem;" id="retirement-chart"></div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       COMPOUND INTEREST PAGE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-compound">
    <div class="calc-container" style="padding-top: 6rem;">
      <div class="calc-back" onclick="showPage('home')">â† Back to Tools</div>
      
      <div class="calc-header animate-fade-up">
        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ğŸ“Š</div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Compound Interest Visualizer</h1>
        <p style="color: var(--text-secondary); max-width: 500px; margin: 0 auto;">See the magic of compound growth. Small contributions today become extraordinary wealth tomorrow.</p>
      </div>
      
      <div class="calc-grid" style="margin-top: 2rem;">
        <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
          <div class="input-group">
            <label>Initial Amount</label>
            <input type="number" id="comp-initial" value="10000" oninput="calculateCompound()" />
          </div>
          <div class="input-group">
            <label>Monthly Contribution</label>
            <input type="number" id="comp-monthly" value="300" oninput="calculateCompound()" />
          </div>
          <div class="input-group">
            <label>Annual Interest Rate (%)</label>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <input type="range" id="comp-rate" min="1" max="15" value="7" step="0.25" oninput="calculateCompound(); document.getElementById('comp-rate-val').textContent = this.value + '%'" />
              <span id="comp-rate-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right;">7%</span>
            </div>
          </div>
          <div class="input-group">
            <label>Time Period (Years)</label>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <input type="range" id="comp-years" min="1" max="50" value="25" step="1" oninput="calculateCompound(); document.getElementById('comp-years-val').textContent = this.value + ' yrs'" />
              <span id="comp-years-val" class="mono" style="font-size: 0.85rem; min-width: 4rem; text-align: right;">25 yrs</span>
            </div>
          </div>
          <div class="input-group">
            <label>Compounding Frequency</label>
            <select id="comp-freq" onchange="calculateCompound()">
              <option value="12" selected>Monthly</option>
              <option value="4">Quarterly</option>
              <option value="1">Annually</option>
              <option value="365">Daily</option>
            </select>
          </div>
        </div>
        
        <div class="calc-results" id="compound-results"></div>
      </div>
      
      <div class="chart-container" style="margin-top: 2rem;" id="compound-chart"></div>
    </div>
  </div>

  <!-- Placeholder pages for remaining tools -->
  <div class="page" id="page-merger">
    <div class="calc-container" style="padding-top: 6rem;">
      <div class="calc-back" onclick="showPage('home')">â† Back to Tools</div>
      <div class="calc-header animate-fade-up">
        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ğŸ¤</div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">M&A Deal Analyzer</h1>
        <p style="color: var(--text-secondary);">Accretion/dilution analysis, synergy modeling, and deal structuring.</p>
      </div>

      <div class="calc-grid animate-fade-up" style="margin-top: 2rem;">
        <!-- Inputs -->
        <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
          <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Acquirer</h3>

          <div class="input-group">
            <label>Earnings Per Share (EPS)
              <span class="tooltip-wrapper"><span class="tooltip-icon">?</span><span class="tooltip-content">Acquirer's current diluted EPS</span></span>
            </label>
            <input type="number" id="ma-acq-eps" value="5.00" step="0.01" oninput="calculateMA()" />
          </div>
          <div class="input-group">
            <label>Share Price ($)</label>
            <input type="number" id="ma-acq-price" value="100" step="0.01" oninput="calculateMA()" />
          </div>
          <div class="input-group">
            <label>Shares Outstanding (M)</label>
            <input type="number" id="ma-acq-shares" value="500" step="1" oninput="calculateMA()" />
          </div>
          <div class="input-group">
            <label>P/E Multiple
              <span class="tooltip-wrapper"><span class="tooltip-icon">?</span><span class="tooltip-content">Acquirer's current price-to-earnings ratio</span></span>
            </label>
            <input type="number" id="ma-acq-pe" value="20" step="0.1" oninput="calculateMA()" />
          </div>

          <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin: 1.5rem 0 1rem;">Target</h3>

          <div class="input-group">
            <label>Earnings Per Share (EPS)</label>
            <input type="number" id="ma-tgt-eps" value="2.50" step="0.01" oninput="calculateMA()" />
          </div>
          <div class="input-group">
            <label>Share Price ($)</label>
            <input type="number" id="ma-tgt-price" value="40" step="0.01" oninput="calculateMA()" />
          </div>
          <div class="input-group">
            <label>Shares Outstanding (M)</label>
            <input type="number" id="ma-tgt-shares" value="200" step="1" oninput="calculateMA()" />
          </div>
          <div class="input-group">
            <label>Offer Premium</label>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <input type="range" id="ma-premium" min="10" max="50" value="25" step="1" oninput="calculateMA(); document.getElementById('ma-premium-val').textContent = this.value + '%'" />
              <span id="ma-premium-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right; color: var(--brand-primary);">25%</span>
            </div>
          </div>

          <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin: 1.5rem 0 1rem;">Deal Structure</h3>

          <div class="input-group">
            <label>Cash Portion</label>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <input type="range" id="ma-cash-pct" min="0" max="100" value="50" step="5" oninput="calculateMA(); document.getElementById('ma-cash-val').textContent = this.value + '% Cash / ' + (100 - this.value) + '% Stock'" />
              <span id="ma-cash-val" class="mono" style="font-size: 0.85rem; min-width: 10rem; text-align: right; color: var(--brand-accent);">50% Cash / 50% Stock</span>
            </div>
          </div>
          <div class="input-group">
            <label>Cost of Debt (for Cash Financing)
              <span class="tooltip-wrapper"><span class="tooltip-icon">?</span><span class="tooltip-content">Pre-tax interest rate on new debt raised to fund the cash portion</span></span>
            </label>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <input type="range" id="ma-debt-cost" min="1" max="12" value="5" step="0.25" oninput="calculateMA(); document.getElementById('ma-debt-cost-val').textContent = this.value + '%'" />
              <span id="ma-debt-cost-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right; color: var(--brand-warning);">5%</span>
            </div>
          </div>
          <div class="input-group">
            <label>Tax Rate</label>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <input type="range" id="ma-tax" min="0" max="40" value="25" step="1" oninput="calculateMA(); document.getElementById('ma-tax-val').textContent = this.value + '%'" />
              <span id="ma-tax-val" class="mono" style="font-size: 0.85rem; min-width: 3.5rem; text-align: right; color: var(--brand-danger);">25%</span>
            </div>
          </div>

          <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin: 1.5rem 0 1rem;">Synergies</h3>

          <div class="input-group">
            <label>Expected Revenue Synergies ($M)</label>
            <input type="number" id="ma-rev-syn" value="0" step="1" oninput="calculateMA()" />
          </div>
          <div class="input-group">
            <label>Expected Cost Synergies ($M)</label>
            <input type="number" id="ma-cost-syn" value="50" step="1" oninput="calculateMA()" />
          </div>
        </div>

        <!-- Results -->
        <div class="calc-results" id="ma-results">
          <!-- Populated by JS -->
        </div>
      </div>

      <!-- Sensitivity Table -->
      <div class="chart-container animate-fade-up" style="margin-top: 2rem;" id="ma-sensitivity">
        <!-- Populated by JS -->
      </div>

      <!-- Sources & Uses -->
      <div class="chart-container animate-fade-up" style="margin-top: 1rem;" id="ma-sources-uses">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>
  
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STARTUP RUNWAY CALCULATOR
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-runway">
    <div class="calc-container" style="padding-top: 6rem; max-width: 1000px;">
      <div class="calc-back" onclick="showPage('home')">â† Back to Tools</div>

      <div class="calc-header animate-fade-up">
        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ğŸš€</div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Startup Runway Calculator</h1>
        <p style="color: var(--text-secondary); max-width: 540px; margin: 0 auto;">Calculate your burn rate, runway, and break-even point. Plan with multiple scenarios.</p>
      </div>

      <!-- Scenario Tabs -->
      <div class="tabs" id="runway-tabs" style="max-width: 420px; margin: 0 auto 2rem;">
        <button class="tab" onclick="switchRunwayTab('conservative')" id="runway-tab-conservative">Conservative</button>
        <button class="tab active" onclick="switchRunwayTab('base')" id="runway-tab-base">Base Case</button>
        <button class="tab" onclick="switchRunwayTab('aggressive')" id="runway-tab-aggressive">Aggressive</button>
      </div>

      <div class="calc-grid">
        <!-- Inputs -->
        <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
          <h3 style="font-size: 0.95rem; margin-bottom: 1rem;">ğŸ“¥ Financial Inputs</h3>

          <div class="input-group">
            <label>Cash in Bank ($)</label>
            <input type="number" id="rw-cash" value="500000" oninput="calculateRunway()" placeholder="500000" />
          </div>

          <div class="input-group">
            <label>Monthly Revenue ($)</label>
            <input type="number" id="rw-revenue" value="20000" oninput="calculateRunway()" placeholder="20000" />
          </div>

          <div class="input-group">
            <label>Monthly Revenue Growth Rate: <span id="rw-growth-val" class="mono" style="color:var(--brand-primary);">5%</span></label>
            <input type="range" id="rw-growth" min="0" max="30" step="0.5" value="5" oninput="document.getElementById('rw-growth-val').textContent=this.value+'%'; calculateRunway();" />
            <div class="input-help">0% â€” 30% monthly growth</div>
          </div>

          <div class="input-group">
            <label>Monthly Fixed Costs ($)</label>
            <input type="number" id="rw-fixed" value="45000" oninput="calculateRunway()" placeholder="Rent, salaries, tools" />
            <div class="input-help">Rent, salaries, tools, subscriptions</div>
          </div>

          <div class="input-group">
            <label>Monthly Variable Costs ($)</label>
            <input type="number" id="rw-variable" value="8000" oninput="calculateRunway()" placeholder="8000" />
          </div>

          <div class="input-group">
            <label>One-Time Upcoming Expenses ($)</label>
            <input type="number" id="rw-onetime" value="0" oninput="calculateRunway()" placeholder="0" />
          </div>

          <div class="input-group">
            <label>Monthly Hiring Cost Increases ($)</label>
            <input type="number" id="rw-hiring" value="2000" oninput="calculateRunway()" placeholder="Planned monthly increase" />
            <div class="input-help">Added to costs each month cumulatively</div>
          </div>
        </div>

        <!-- Results -->
        <div class="calc-results">
          <div class="result-card" style="text-align: center;">
            <div class="result-label">Monthly Burn Rate</div>
            <div class="result-value" id="rw-burn">$0</div>
            <div class="input-help">Current costs âˆ’ revenue</div>
          </div>

          <div class="result-card" style="text-align: center;">
            <div class="result-label">Runway (No Growth)</div>
            <div class="result-value" id="rw-runway-flat" style="font-size: 1.5rem;">0 months</div>
          </div>

          <div class="result-card" style="text-align: center;">
            <div class="result-label">Runway (With Growth)</div>
            <div class="result-value" id="rw-runway-growth" style="font-size: 1.5rem;">0 months</div>
          </div>

          <div class="result-card" style="text-align: center;">
            <div class="result-label">Cash Zero Date</div>
            <div class="result-value" id="rw-zero-date" style="font-size: 1.25rem;">â€”</div>
          </div>

          <div id="rw-safe-zone" class="result-card" style="text-align: center;">
            <div class="result-label">Safety Zone</div>
            <div class="result-value" id="rw-safe-text" style="font-size: 1.5rem;">â€”</div>
          </div>

          <div class="result-card" style="text-align: center;">
            <div class="result-label">Break-Even Month</div>
            <div class="result-value" id="rw-breakeven" style="font-size: 1.25rem;">â€”</div>
          </div>
        </div>
      </div>

      <!-- Chart -->
      <div class="chart-container" style="margin-top: 2rem;">
        <h3 style="font-size: 0.95rem; margin-bottom: 1rem;">ğŸ“Š Monthly Cash Balance Projection</h3>
        <div id="rw-scenario-label" style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em;">Base Case Scenario</div>
        <div id="rw-chart" style="display: flex; align-items: flex-end; gap: 3px; height: 220px; position: relative; padding-bottom: 24px;">
          <!-- bars injected by JS -->
        </div>
        <div style="display: flex; align-items: center; gap: 1rem; margin-top: 0.75rem; font-size: 0.72rem; color: var(--text-muted);">
          <span style="display:flex;align-items:center;gap:4px;"><span style="width:12px;height:12px;border-radius:2px;background:linear-gradient(135deg,var(--brand-primary),var(--brand-accent));display:inline-block;"></span> Positive Balance</span>
          <span style="display:flex;align-items:center;gap:4px;"><span style="width:12px;height:12px;border-radius:2px;background:var(--brand-danger);display:inline-block;"></span> Negative / Danger</span>
          <span style="display:flex;align-items:center;gap:4px;"><span style="width:12px;height:12px;border-radius:2px;background:var(--brand-success);display:inline-block;"></span> Break-Even Reached</span>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NET WORTH TRACKER
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-networth">
    <div class="calc-container" style="padding-top: 6rem; max-width: 1000px;">
      <div class="calc-back" onclick="showPage('home')">â† Back to Tools</div>

      <div class="calc-header animate-fade-up">
        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ğŸ’°</div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Net Worth Tracker</h1>
        <p style="color: var(--text-secondary); max-width: 540px; margin: 0 auto;">Track your complete financial picture. Save snapshots to monitor progress over time.</p>
      </div>

      <div class="calc-grid">
        <!-- Assets Column -->
        <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
          <h3 style="font-size: 0.95rem; margin-bottom: 1rem; color: var(--brand-success);">ğŸ“ˆ Assets</h3>

          <div class="input-group">
            <label>Cash & Savings ($)</label>
            <input type="number" id="nw-cash" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>TFSA ($)</label>
            <input type="number" id="nw-tfsa" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>RRSP ($)</label>
            <input type="number" id="nw-rrsp" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>Non-Registered Investments ($)</label>
            <input type="number" id="nw-nonreg" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>Real Estate ($)</label>
            <input type="number" id="nw-realestate" value="0" oninput="calculateNetWorth()" />
            <div class="input-help">Primary residence market value</div>
          </div>
          <div class="input-group">
            <label>Vehicles ($)</label>
            <input type="number" id="nw-vehicles" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>Other Assets ($)</label>
            <input type="number" id="nw-other-assets" value="0" oninput="calculateNetWorth()" />
            <div class="input-help">Business equity, crypto, collectibles</div>
          </div>
        </div>

        <!-- Liabilities Column -->
        <div class="calc-inputs glass-card" style="padding: var(--space-xl);">
          <h3 style="font-size: 0.95rem; margin-bottom: 1rem; color: var(--brand-danger);">ğŸ“‰ Liabilities</h3>

          <div class="input-group">
            <label>Mortgage Balance ($)</label>
            <input type="number" id="nw-mortgage" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>Car Loans ($)</label>
            <input type="number" id="nw-carloans" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>Student Loans ($)</label>
            <input type="number" id="nw-student" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>Credit Card Debt ($)</label>
            <input type="number" id="nw-cc" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>Line of Credit ($)</label>
            <input type="number" id="nw-loc" value="0" oninput="calculateNetWorth()" />
          </div>
          <div class="input-group">
            <label>Other Debt ($)</label>
            <input type="number" id="nw-other-debt" value="0" oninput="calculateNetWorth()" />
          </div>
        </div>
      </div>

      <!-- Results -->
      <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-top: 2rem;">
        <div class="result-card" style="text-align: center;">
          <div class="result-label">Total Assets</div>
          <div class="result-value" id="nw-total-assets" style="font-size: 1.5rem; color: var(--brand-success); -webkit-text-fill-color: var(--brand-success);">$0</div>
        </div>
        <div class="result-card" style="text-align: center;">
          <div class="result-label">Total Liabilities</div>
          <div class="result-value" id="nw-total-liabilities" style="font-size: 1.5rem; color: var(--brand-danger); -webkit-text-fill-color: var(--brand-danger);">$0</div>
        </div>
        <div class="result-card" style="text-align: center;">
          <div class="result-label">Liquid Net Worth</div>
          <div class="result-value" id="nw-liquid" style="font-size: 1.5rem;">$0</div>
          <div class="input-help">Excludes real estate & vehicles</div>
        </div>
      </div>

      <!-- Big Net Worth Card -->
      <div class="result-card" style="text-align: center; margin-top: 1.5rem; padding: var(--space-2xl);">
        <div class="result-label" style="font-size: 0.9rem;">Net Worth</div>
        <div class="result-value" id="nw-networth" style="font-size: 3rem;">$0</div>
        <div id="nw-dta" style="margin-top: 0.75rem;"></div>
      </div>

      <!-- Pie Chart + Snapshot -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1.5rem;">
        <!-- Asset Allocation Pie -->
        <div class="chart-container">
          <h3 style="font-size: 0.95rem; margin-bottom: 1rem;">ğŸ¥§ Asset Allocation</h3>
          <div style="display: flex; align-items: center; gap: 1.5rem;">
            <div id="nw-pie" style="width: 150px; height: 150px; border-radius: 50%; flex-shrink: 0; background: var(--border-primary);"></div>
            <div id="nw-pie-legend" style="font-size: 0.75rem; display: flex; flex-direction: column; gap: 0.375rem;"></div>
          </div>
        </div>

        <!-- Snapshots -->
        <div class="chart-container">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
            <h3 style="font-size: 0.95rem;">ğŸ“¸ Snapshots</h3>
            <button class="btn btn-primary btn-sm" onclick="saveNetWorthSnapshot()">Save Snapshot</button>
          </div>
          <div id="nw-snapshots" style="max-height: 250px; overflow-y: auto; font-size: 0.8rem;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       JAVASCRIPT ENGINE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script>
    // â”€â”€ Utility Functions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const fmt = (n, decimals = 0) => {
      if (n === undefined || n === null || isNaN(n)) return '$0';
      const abs = Math.abs(n);
      if (abs >= 1e9) return (n < 0 ? '-' : '') + '$' + (abs / 1e9).toFixed(1) + 'B';
      if (abs >= 1e6) return (n < 0 ? '-' : '') + '$' + (abs / 1e6).toFixed(1) + 'M';
      if (abs >= 1e3) return (n < 0 ? '-' : '') + '$' + (abs / 1e3).toFixed(decimals > 0 ? decimals : 0) + 'K';
      return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: decimals }).format(n);
    };
    
    const fmtFull = (n) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'CAD', maximumFractionDigits: 0 }).format(n || 0);
    
    const fmtPct = (n, decimals = 1) => (n || 0).toFixed(decimals) + '%';
    
    const fmtNum = (n) => new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 }).format(n || 0);
    
    // â”€â”€ Page Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      const target = document.getElementById('page-' + pageId);
      if (target) {
        target.classList.add('active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
      
      // Close mobile menu
      document.getElementById('nav-links').classList.remove('mobile-open');
      
      // Initialize calculators
      if (pageId === 'valuation') calculateDCF();
      if (pageId === 'mortgage') calculateMortgage();
      if (pageId === 'investment') calculateCAGR();
      if (pageId === 'retirement') calculateRetirement();
      if (pageId === 'compound') calculateCompound();
      if (pageId === 'runway') calculateRunway();
      if (pageId === 'networth') { calculateNetWorth(); loadNetWorthSnapshots(); }
    }
    
    // â”€â”€ Theme Toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let isDark = localStorage.getItem('theme') !== 'light';
    
    function toggleTheme() {
      isDark = !isDark;
      document.documentElement.classList.toggle('light', !isDark);
      document.querySelector('.theme-toggle').textContent = isDark ? 'ğŸŒ™' : 'â˜€ï¸';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }
    
    // Initialize theme
    if (!isDark) {
      document.documentElement.classList.add('light');
      document.querySelector('.theme-toggle').textContent = 'â˜€ï¸';
    }
    
    // â”€â”€ Mobile Menu â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function toggleMobileMenu() {
      document.getElementById('nav-links').classList.toggle('mobile-open');
    }
    
    // â”€â”€ Navbar Scroll Effect â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    window.addEventListener('scroll', () => {
      document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 50);
    });
    
    // â”€â”€ Intersection Observer for Reveals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
    
    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    
    // â”€â”€ Hero Counter Animation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function animateCounters() {
      document.querySelectorAll('[data-count]').forEach(el => {
        const target = parseInt(el.dataset.count);
        let current = 0;
        const increment = target / 40;
        const timer = setInterval(() => {
          current += increment;
          if (current >= target) {
            current = target;
            clearInterval(timer);
          }
          el.textContent = Math.floor(current) + (target > 10 ? '+' : '');
        }, 40);
      });
    }
    
    setTimeout(animateCounters, 800);
    
    // â”€â”€ Valuation Tab Switching â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function switchValTab(tab) {
      document.querySelectorAll('#val-tabs .tab').forEach(t => t.classList.remove('active'));
      event.target.classList.add('active');
      
      document.getElementById('val-dcf').style.display = tab === 'dcf' ? 'block' : 'none';
      document.getElementById('val-multiples').style.display = tab === 'multiples' ? 'block' : 'none';
      document.getElementById('val-asset').style.display = tab === 'asset' ? 'block' : 'none';
      
      if (tab === 'dcf') calculateDCF();
      if (tab === 'multiples') calculateMultiples();
      if (tab === 'asset') calculateAsset();
    }
    
    // â”€â”€ Investment Tab Switching â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function switchInvTab(tab) {
      document.querySelectorAll('#inv-tabs .tab').forEach(t => t.classList.remove('active'));
      event.target.classList.add('active');
      
      document.getElementById('inv-cagr').style.display = tab === 'cagr' ? 'block' : 'none';
      document.getElementById('inv-dca').style.display = tab === 'dca' ? 'block' : 'none';
      
      if (tab === 'cagr') calculateCAGR();
      if (tab === 'dca') calculateDCA();
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DCF CALCULATOR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function calculateDCF() {
      const fcf = parseFloat(document.getElementById('dcf-fcf').value) || 0;
      const growth = parseFloat(document.getElementById('dcf-growth').value) / 100;
      const terminal = parseFloat(document.getElementById('dcf-terminal').value) / 100;
      const wacc = parseFloat(document.getElementById('dcf-wacc').value) / 100;
      const years = parseInt(document.getElementById('dcf-years').value);
      const debt = parseFloat(document.getElementById('dcf-debt').value) || 0;
      
      if (wacc <= terminal) {
        document.getElementById('dcf-results').innerHTML = `
          <div class="result-card" style="border-color: rgba(239, 68, 68, 0.3); background: rgba(239, 68, 68, 0.05);">
            <p style="color: var(--brand-danger); font-weight: 600;">âš ï¸ Discount rate must be higher than terminal growth rate</p>
          </div>`;
        return;
      }
      
      // Project FCFs
      let projections = [];
      let pvSum = 0;
      
      for (let i = 1; i <= years; i++) {
        const projFCF = fcf * Math.pow(1 + growth, i);
        const pvFactor = Math.pow(1 + wacc, i);
        const pvFCF = projFCF / pvFactor;
        pvSum += pvFCF;
        projections.push({ year: i, fcf: projFCF, pv: pvFCF });
      }
      
      // Terminal value (Gordon Growth Model)
      const finalFCF = fcf * Math.pow(1 + growth, years);
      const terminalFCF = finalFCF * (1 + terminal);
      const terminalValue = terminalFCF / (wacc - terminal);
      const pvTerminal = terminalValue / Math.pow(1 + wacc, years);
      
      const enterpriseValue = pvSum + pvTerminal;
      const equityValue = enterpriseValue - debt;
      const tvPct = (pvTerminal / enterpriseValue * 100);
      
      // Results
      document.getElementById('dcf-results').innerHTML = `
        <div class="result-card">
          <div class="result-label">Enterprise Value</div>
          <div class="result-value">${fmt(enterpriseValue)}</div>
          <div style="margin-top: 0.75rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">PV of FCFs: ${fmt(pvSum)}</span>
            <span class="metric-pill neutral">PV Terminal: ${fmt(pvTerminal)}</span>
          </div>
        </div>
        
        <div class="result-card">
          <div class="result-label">Equity Value</div>
          <div class="result-value" style="${equityValue < 0 ? 'background: linear-gradient(135deg, var(--brand-danger), #f97316); -webkit-background-clip: text;' : ''}">${fmt(equityValue)}</div>
          ${debt !== 0 ? `<div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.375rem;">After ${debt > 0 ? 'subtracting' : 'adding'} ${fmtFull(Math.abs(debt))} net debt</div>` : ''}
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Key Metrics</div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Terminal Value %</div>
              <div class="mono" style="font-size: 1rem; font-weight: 700; color: ${tvPct > 75 ? 'var(--brand-warning)' : 'var(--text-primary)'};">${tvPct.toFixed(1)}%</div>
              ${tvPct > 75 ? '<div style="font-size: 0.65rem; color: var(--brand-warning);">âš ï¸ High TV reliance</div>' : ''}
            </div>
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Implied Multiple</div>
              <div class="mono" style="font-size: 1rem; font-weight: 700;">${(enterpriseValue / fcf).toFixed(1)}x FCF</div>
            </div>
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Year ${years} FCF</div>
              <div class="mono" style="font-size: 1rem; font-weight: 700;">${fmt(finalFCF)}</div>
            </div>
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Terminal Value</div>
              <div class="mono" style="font-size: 1rem; font-weight: 700;">${fmt(terminalValue)}</div>
            </div>
          </div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">FCF Projections</div>
          ${projections.map(p => `
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.375rem 0; border-bottom: 1px solid var(--border-primary);">
              <span style="font-size: 0.8rem; color: var(--text-muted);">Year ${p.year}</span>
              <span class="mono" style="font-size: 0.8rem;">${fmt(p.fcf)}</span>
              <span class="mono" style="font-size: 0.75rem; color: var(--text-muted);">PV: ${fmt(p.pv)}</span>
            </div>
          `).join('')}
        </div>
      `;
      
      // Sensitivity table
      const waccRange = [-2, -1, 0, 1, 2].map(d => wacc * 100 + d);
      const growthRange = [-1, -0.5, 0, 0.5, 1].map(d => terminal * 100 + d).filter(g => g >= 0);
      
      let tableHTML = `
        <div style="font-size: 0.85rem; font-weight: 700; margin-bottom: 1rem;">Sensitivity Analysis: Enterprise Value</div>
        <div style="overflow-x: auto;">
        <table class="sensitivity-table">
          <tr>
            <th>WACC \\ Terminal G</th>
            ${growthRange.map(g => `<th>${g.toFixed(1)}%</th>`).join('')}
          </tr>
      `;
      
      waccRange.forEach(w => {
        tableHTML += `<tr><td>${w.toFixed(1)}%</td>`;
        growthRange.forEach(g => {
          if (w / 100 <= g / 100) {
            tableHTML += '<td style="color: var(--text-muted);">N/A</td>';
            return;
          }
          let pv = 0;
          for (let i = 1; i <= years; i++) {
            pv += (fcf * Math.pow(1 + growth, i)) / Math.pow(1 + w / 100, i);
          }
          const tFCF = fcf * Math.pow(1 + growth, years) * (1 + g / 100);
          const tv = tFCF / (w / 100 - g / 100);
          const pvTV = tv / Math.pow(1 + w / 100, years);
          const ev = pv + pvTV;
          const isBase = Math.abs(w - wacc * 100) < 0.01 && Math.abs(g - terminal * 100) < 0.01;
          tableHTML += `<td class="${isBase ? 'highlight' : ''}">${fmt(ev)}</td>`;
        });
        tableHTML += '</tr>';
      });
      
      tableHTML += '</table></div>';
      document.getElementById('dcf-sensitivity').innerHTML = tableHTML;
      
      // Bar chart
      const maxFCF = Math.max(...projections.map(p => p.fcf));
      document.getElementById('dcf-chart').innerHTML = `
        <div style="font-size: 0.85rem; font-weight: 700; margin-bottom: 1rem;">Projected Free Cash Flow</div>
        <div style="display: flex; align-items: flex-end; gap: 0.5rem; height: 200px; padding: 0 0.5rem;">
          ${projections.map(p => `
            <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 0.25rem;">
              <span class="mono" style="font-size: 0.65rem; color: var(--text-muted);">${fmt(p.fcf)}</span>
              <div style="width: 100%; height: ${(p.fcf / maxFCF * 150)}px; background: linear-gradient(180deg, var(--brand-primary), var(--brand-accent)); border-radius: 4px 4px 0 0; transition: height 1s ease; min-height: 4px;"></div>
              <span style="font-size: 0.7rem; color: var(--text-muted);">Y${p.year}</span>
            </div>
          `).join('')}
        </div>
      `;
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MULTIPLES CALCULATOR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function calculateMultiples() {
      const revenue = parseFloat(document.getElementById('mult-revenue').value) || 0;
      const ebitda = parseFloat(document.getElementById('mult-ebitda').value) || 0;
      const income = parseFloat(document.getElementById('mult-income').value) || 0;
      const evRev = parseFloat(document.getElementById('mult-ev-rev').value);
      const evEbitda = parseFloat(document.getElementById('mult-ev-ebitda').value);
      const pe = parseFloat(document.getElementById('mult-pe').value);
      
      const valRevenue = revenue * evRev;
      const valEbitda = ebitda * evEbitda;
      const valEarnings = income * pe;
      const average = (valRevenue + valEbitda + valEarnings) / 3;
      const median = [valRevenue, valEbitda, valEarnings].sort((a, b) => a - b)[1];
      const low = Math.min(valRevenue, valEbitda, valEarnings);
      const high = Math.max(valRevenue, valEbitda, valEarnings);
      
      // Football field chart
      const maxVal = high * 1.1;
      const barWidth = (v) => (v / maxVal * 100).toFixed(1);
      
      document.getElementById('multiples-results').innerHTML = `
        <div class="result-card">
          <div class="result-label">Blended Valuation</div>
          <div class="result-value">${fmt(average)}</div>
          <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.375rem;">Average of three methodologies</div>
        </div>
        
        <div class="result-card">
          <div class="result-label">Median Valuation</div>
          <div class="result-value">${fmt(median)}</div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Valuation Range (Football Field)</div>
          
          <div style="margin-bottom: 1rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
              <span style="font-size: 0.8rem; font-weight: 600;">EV/Revenue (${evRev}x)</span>
              <span class="mono" style="font-size: 0.8rem;">${fmt(valRevenue)}</span>
            </div>
            <div class="chart-bar">
              <div class="chart-bar-fill" style="width: ${barWidth(valRevenue)}%; background: linear-gradient(90deg, #6366f1, #818cf8);"></div>
            </div>
          </div>
          
          <div style="margin-bottom: 1rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
              <span style="font-size: 0.8rem; font-weight: 600;">EV/EBITDA (${evEbitda}x)</span>
              <span class="mono" style="font-size: 0.8rem;">${fmt(valEbitda)}</span>
            </div>
            <div class="chart-bar">
              <div class="chart-bar-fill" style="width: ${barWidth(valEbitda)}%; background: linear-gradient(90deg, #8b5cf6, #a78bfa);"></div>
            </div>
          </div>
          
          <div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
              <span style="font-size: 0.8rem; font-weight: 600;">P/E (${pe}x)</span>
              <span class="mono" style="font-size: 0.8rem;">${fmt(valEarnings)}</span>
            </div>
            <div class="chart-bar">
              <div class="chart-bar-fill" style="width: ${barWidth(valEarnings)}%; background: linear-gradient(90deg, #06b6d4, #22d3ee);"></div>
            </div>
          </div>
          
          <div class="divider"></div>
          <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
            <span style="color: var(--text-muted);">Range: ${fmt(low)} â€” ${fmt(high)}</span>
            <span style="color: var(--text-muted);">Spread: ${((high - low) / average * 100).toFixed(0)}%</span>
          </div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Implied Metrics</div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">EBITDA Margin</div>
              <div class="mono" style="font-weight: 700;">${revenue > 0 ? (ebitda / revenue * 100).toFixed(1) + '%' : 'N/A'}</div>
            </div>
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Net Margin</div>
              <div class="mono" style="font-weight: 700;">${revenue > 0 ? (income / revenue * 100).toFixed(1) + '%' : 'N/A'}</div>
            </div>
          </div>
        </div>
      `;
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ASSET-BASED CALCULATOR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function calculateAsset() {
      const cash = parseFloat(document.getElementById('asset-cash').value) || 0;
      const ar = parseFloat(document.getElementById('asset-ar').value) || 0;
      const inv = parseFloat(document.getElementById('asset-inv').value) || 0;
      const ppe = parseFloat(document.getElementById('asset-ppe').value) || 0;
      const other = parseFloat(document.getElementById('asset-other').value) || 0;
      const ap = parseFloat(document.getElementById('asset-ap').value) || 0;
      const debt = parseFloat(document.getElementById('asset-debt').value) || 0;
      const otherLiab = parseFloat(document.getElementById('asset-otherliab').value) || 0;
      
      const totalAssets = cash + ar + inv + ppe + other;
      const totalLiab = ap + debt + otherLiab;
      const nav = totalAssets - totalLiab;
      const currentRatio = (ap + otherLiab) > 0 ? (cash + ar + inv) / (ap + otherLiab) : 0;
      
      document.getElementById('asset-results').innerHTML = `
        <div class="result-card">
          <div class="result-label">Net Asset Value (NAV)</div>
          <div class="result-value">${fmtFull(nav)}</div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Balance Sheet</div>
          <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--border-primary);">
            <span style="font-size: 0.85rem; color: var(--brand-success);">Total Assets</span>
            <span class="mono" style="font-size: 0.85rem;">${fmtFull(totalAssets)}</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--border-primary);">
            <span style="font-size: 0.85rem; color: var(--brand-danger);">Total Liabilities</span>
            <span class="mono" style="font-size: 0.85rem;">${fmtFull(totalLiab)}</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; font-weight: 700;">
            <span style="font-size: 0.85rem;">Net Asset Value</span>
            <span class="mono" style="font-size: 0.85rem; color: ${nav >= 0 ? 'var(--brand-success)' : 'var(--brand-danger)'};">${fmtFull(nav)}</span>
          </div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Ratios</div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Current Ratio</div>
              <div class="mono" style="font-weight: 700; color: ${currentRatio >= 1.5 ? 'var(--brand-success)' : currentRatio >= 1 ? 'var(--brand-warning)' : 'var(--brand-danger)'};">${currentRatio.toFixed(2)}x</div>
            </div>
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Debt Ratio</div>
              <div class="mono" style="font-weight: 700;">${totalAssets > 0 ? (totalLiab / totalAssets * 100).toFixed(1) + '%' : 'N/A'}</div>
            </div>
          </div>
        </div>
      `;
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MORTGAGE CALCULATOR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function calculateMortgage() {
      const price = parseFloat(document.getElementById('mort-price').value) || 0;
      const downPct = parseFloat(document.getElementById('mort-down').value) / 100;
      const rate = parseFloat(document.getElementById('mort-rate').value) / 100;
      const amort = parseInt(document.getElementById('mort-amort').value);
      const freq = parseInt(document.getElementById('mort-freq').value);
      const province = document.getElementById('mort-province').value;
      
      const downPayment = price * downPct;
      const principal = price - downPayment;
      
      // Update down payment help
      document.getElementById('mort-down-help').textContent = `Down payment: ${fmtFull(downPayment)}`;
      
      // CMHC Insurance (if down < 20%)
      let cmhcPremium = 0;
      if (downPct < 0.20) {
        if (downPct >= 0.15) cmhcPremium = principal * 0.028;
        else if (downPct >= 0.10) cmhcPremium = principal * 0.031;
        else cmhcPremium = principal * 0.04;
      }
      
      const totalMortgage = principal + cmhcPremium;
      
      // Canadian mortgage: semi-annual compounding
      const semiAnnualRate = Math.pow(1 + rate / 2, 2) - 1;
      const periodicRate = Math.pow(1 + semiAnnualRate, 1 / freq) - 1;
      const totalPayments = amort * freq;
      
      // Payment calculation
      const payment = totalMortgage * (periodicRate * Math.pow(1 + periodicRate, totalPayments)) / (Math.pow(1 + periodicRate, totalPayments) - 1);
      const monthlyEquiv = payment * freq / 12;
      const totalCost = payment * totalPayments;
      const totalInterest = totalCost - totalMortgage;
      
      // OSFI Stress Test
      const stressRate = Math.max(rate + 0.02, 0.0525);
      const stressSemiAnnual = Math.pow(1 + stressRate / 2, 2) - 1;
      const stressPeriodic = Math.pow(1 + stressSemiAnnual, 1 / 12) - 1;
      const stressPayment = totalMortgage * (stressPeriodic * Math.pow(1 + stressPeriodic, amort * 12)) / (Math.pow(1 + stressPeriodic, amort * 12) - 1);
      
      // Land Transfer Tax
      let ltt = 0;
      if (province === 'ON') {
        // Ontario LTT
        if (price <= 55000) ltt = price * 0.005;
        else if (price <= 250000) ltt = 275 + (price - 55000) * 0.01;
        else if (price <= 400000) ltt = 2225 + (price - 250000) * 0.015;
        else if (price <= 2000000) ltt = 4475 + (price - 400000) * 0.02;
        else ltt = 36475 + (price - 2000000) * 0.025;
      } else if (province === 'BC') {
        if (price <= 200000) ltt = price * 0.01;
        else if (price <= 2000000) ltt = 2000 + (price - 200000) * 0.02;
        else ltt = 38000 + (price - 2000000) * 0.03;
      }
      
      const freqLabel = { 12: 'Monthly', 26: 'Bi-Weekly', 52: 'Weekly', 24: 'Semi-Monthly' }[freq];
      
      document.getElementById('mortgage-results').innerHTML = `
        <div class="result-card">
          <div class="result-label">${freqLabel} Payment</div>
          <div class="result-value">${fmtFull(payment)}</div>
          <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.375rem;">Monthly equivalent: ${fmtFull(monthlyEquiv)}</div>
        </div>
        
        <div class="result-card">
          <div class="result-label">Total Cost of Mortgage</div>
          <div class="result-value">${fmt(totalCost)}</div>
          <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">Principal: ${fmt(totalMortgage)}</span>
            <span class="metric-pill negative">Interest: ${fmt(totalInterest)}</span>
          </div>
        </div>
        
        ${cmhcPremium > 0 ? `
        <div class="glass-card" style="padding: var(--space-lg); border-color: rgba(245, 158, 11, 0.3);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--brand-warning); margin-bottom: 0.375rem;">âš ï¸ CMHC INSURANCE REQUIRED</div>
          <div style="font-size: 0.85rem; color: var(--text-secondary);">Down payment is less than 20%. CMHC premium of <span class="mono" style="font-weight: 700;">${fmtFull(cmhcPremium)}</span> added to mortgage.</div>
        </div>
        ` : ''}
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Closing Costs</div>
          <div style="display: flex; justify-content: space-between; padding: 0.375rem 0; border-bottom: 1px solid var(--border-primary);">
            <span style="font-size: 0.85rem;">Down Payment</span>
            <span class="mono" style="font-size: 0.85rem;">${fmtFull(downPayment)}</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 0.375rem 0; border-bottom: 1px solid var(--border-primary);">
            <span style="font-size: 0.85rem;">Land Transfer Tax</span>
            <span class="mono" style="font-size: 0.85rem;">${fmtFull(ltt)}</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 0.375rem 0; border-bottom: 1px solid var(--border-primary);">
            <span style="font-size: 0.85rem;">Legal Fees (est.)</span>
            <span class="mono" style="font-size: 0.85rem;">${fmtFull(2000)}</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; font-weight: 700;">
            <span style="font-size: 0.85rem;">Total Cash Needed</span>
            <span class="mono" style="font-size: 0.85rem;">${fmtFull(downPayment + ltt + 2000)}</span>
          </div>
        </div>
        <div class="affiliate-cta">
          <span class="ad-label">Sponsored</span>
          Looking for the best mortgage rates? <a href="#">Compare rates at [Partner Name]</a>
        </div>
      `;
      
      // Stress test
      document.getElementById('mortgage-stress').innerHTML = `
        <div style="font-size: 0.85rem; font-weight: 700; margin-bottom: 1rem;">ğŸ›ï¸ OSFI Stress Test (B-20)</div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
          <div class="glass-card" style="padding: var(--space-lg); text-align: center;">
            <div style="font-size: 0.72rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Your Rate</div>
            <div class="mono" style="font-size: 1.5rem; font-weight: 700; color: var(--brand-success);">${(rate * 100).toFixed(2)}%</div>
            <div class="mono" style="font-size: 1rem; margin-top: 0.375rem;">${fmtFull(monthlyEquiv)}/mo</div>
          </div>
          <div class="glass-card" style="padding: var(--space-lg); text-align: center;">
            <div style="font-size: 0.72rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Stress Test Rate</div>
            <div class="mono" style="font-size: 1.5rem; font-weight: 700; color: var(--brand-warning);">${(stressRate * 100).toFixed(2)}%</div>
            <div class="mono" style="font-size: 1rem; margin-top: 0.375rem;">${fmtFull(stressPayment)}/mo</div>
          </div>
        </div>
        <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 1rem; text-align: center;">
          You must qualify at the stress test rate (contract rate + 2% or 5.25%, whichever is higher). Monthly payment increases by ${fmtFull(stressPayment - monthlyEquiv)}.
        </div>
      `;
      
      // Simple amortization visualization
      let balance = totalMortgage;
      const monthlyRate = Math.pow(1 + semiAnnualRate, 1 / 12) - 1;
      const monthlyPmt = totalMortgage * (monthlyRate * Math.pow(1 + monthlyRate, amort * 12)) / (Math.pow(1 + monthlyRate, amort * 12) - 1);
      let yearlyData = [];
      
      for (let year = 1; year <= amort; year++) {
        let yearInterest = 0;
        let yearPrincipal = 0;
        for (let m = 0; m < 12; m++) {
          const interestPmt = balance * monthlyRate;
          const principalPmt = monthlyPmt - interestPmt;
          yearInterest += interestPmt;
          yearPrincipal += principalPmt;
          balance -= principalPmt;
          if (balance < 0) balance = 0;
        }
        yearlyData.push({ year, balance, interest: yearInterest, principal: yearPrincipal });
      }
      
      document.getElementById('mortgage-amort').innerHTML = `
        <div style="font-size: 0.85rem; font-weight: 700; margin-bottom: 1rem;">Amortization â€” Balance Over Time</div>
        <div style="display: flex; align-items: flex-end; gap: 2px; height: 200px; padding: 0;">
          ${yearlyData.map(d => `
            <div style="flex: 1; height: ${(d.balance / totalMortgage * 190)}px; background: linear-gradient(180deg, var(--brand-primary), var(--brand-accent)); border-radius: 2px 2px 0 0; min-height: 2px; position: relative;" title="Year ${d.year}: ${fmtFull(d.balance)} remaining"></div>
          `).join('')}
        </div>
        <div style="display: flex; justify-content: space-between; font-size: 0.7rem; color: var(--text-muted); margin-top: 0.5rem;">
          <span>Year 1</span>
          <span>Year ${Math.floor(amort / 2)}</span>
          <span>Year ${amort}</span>
        </div>
      `;
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CAGR CALCULATOR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function calculateCAGR() {
      const initial = parseFloat(document.getElementById('cagr-initial').value) || 0;
      const final_ = parseFloat(document.getElementById('cagr-final').value) || 0;
      const years = parseFloat(document.getElementById('cagr-years').value) || 1;
      
      if (initial <= 0) {
        document.getElementById('cagr-results').innerHTML = `<div class="result-card"><p style="color: var(--text-muted);">Enter a positive initial investment.</p></div>`;
        return;
      }
      
      const cagr = (Math.pow(final_ / initial, 1 / years) - 1) * 100;
      const totalReturn = ((final_ - initial) / initial) * 100;
      const gain = final_ - initial;
      
      document.getElementById('cagr-results').innerHTML = `
        <div class="result-card">
          <div class="result-label">CAGR</div>
          <div class="result-value">${cagr.toFixed(2)}%</div>
          <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.375rem;">Compound Annual Growth Rate</div>
        </div>
        
        <div class="result-card">
          <div class="result-label">Total Return</div>
          <div class="result-value" style="${totalReturn >= 0 ? '' : 'background: linear-gradient(135deg, var(--brand-danger), #f97316); -webkit-background-clip: text;'}">${totalReturn.toFixed(1)}%</div>
          <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
            <span class="metric-pill ${gain >= 0 ? 'positive' : 'negative'}">${gain >= 0 ? '+' : ''}${fmtFull(gain)}</span>
          </div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Rule of 72</div>
          <div style="font-size: 0.85rem; color: var(--text-secondary);">
            At ${cagr.toFixed(1)}% CAGR, your money doubles every <strong style="color: var(--text-primary);">${cagr > 0 ? (72 / cagr).toFixed(1) : 'âˆ'} years</strong>
          </div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Benchmarks</div>
          <div style="font-size: 0.8rem; color: var(--text-secondary); display: flex; flex-direction: column; gap: 0.5rem;">
            <div style="display: flex; justify-content: space-between;">
              <span>S&P 500 (30yr avg)</span>
              <span class="mono" style="color: ${cagr > 10.7 ? 'var(--brand-success)' : 'var(--text-muted)'};">~10.7%</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>Warren Buffett</span>
              <span class="mono" style="color: ${cagr > 20 ? 'var(--brand-success)' : 'var(--text-muted)'};">~20%</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>GIC (Canada)</span>
              <span class="mono">~4-5%</span>
            </div>
          </div>
        </div>
      `;
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DCA SIMULATOR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function calculateDCA() {
      const monthly = parseFloat(document.getElementById('dca-monthly').value) || 0;
      const annualReturn = parseFloat(document.getElementById('dca-return').value) / 100;
      const years = parseInt(document.getElementById('dca-years').value);
      const initial = parseFloat(document.getElementById('dca-initial').value) || 0;
      
      const monthlyRate = Math.pow(1 + annualReturn, 1 / 12) - 1;
      const totalMonths = years * 12;
      
      let balance = initial;
      let totalContributed = initial;
      let yearlyData = [];
      
      for (let m = 1; m <= totalMonths; m++) {
        balance = balance * (1 + monthlyRate) + monthly;
        totalContributed += monthly;
        if (m % 12 === 0) {
          yearlyData.push({ year: m / 12, balance, contributed: totalContributed, earnings: balance - totalContributed });
        }
      }
      
      const totalEarnings = balance - totalContributed;
      
      document.getElementById('dca-results').innerHTML = `
        <div class="result-card">
          <div class="result-label">Final Portfolio Value</div>
          <div class="result-value">${fmtFull(balance)}</div>
        </div>
        
        <div class="result-card">
          <div class="result-label">Investment Earnings</div>
          <div class="result-value" style="background: linear-gradient(135deg, var(--brand-success), #06b6d4); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">${fmtFull(totalEarnings)}</div>
          <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap;">
            <span class="metric-pill neutral">Contributed: ${fmtFull(totalContributed)}</span>
            <span class="metric-pill positive">Earned: ${fmtFull(totalEarnings)}</span>
          </div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Breakdown</div>
          <div style="margin-bottom: 0.75rem;">
            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.25rem;">
              <span>Contributions</span>
              <span class="mono">${(totalContributed / balance * 100).toFixed(0)}%</span>
            </div>
            <div class="chart-bar">
              <div class="chart-bar-fill" style="width: ${(totalContributed / balance * 100)}%; background: var(--brand-primary);"></div>
            </div>
          </div>
          <div>
            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.25rem;">
              <span>Earnings (Compound Growth)</span>
              <span class="mono">${(totalEarnings / balance * 100).toFixed(0)}%</span>
            </div>
            <div class="chart-bar">
              <div class="chart-bar-fill" style="width: ${(totalEarnings / balance * 100)}%; background: linear-gradient(90deg, var(--brand-success), var(--brand-accent));"></div>
            </div>
          </div>
        </div>
      `;
      
      // Growth chart
      if (yearlyData.length > 0) {
        const maxVal = yearlyData[yearlyData.length - 1].balance;
        document.getElementById('dca-chart').innerHTML = `
          <div style="font-size: 0.85rem; font-weight: 700; margin-bottom: 1rem;">Portfolio Growth Over Time</div>
          <div style="display: flex; align-items: flex-end; gap: 3px; height: 220px;">
            ${yearlyData.map(d => `
              <div style="flex: 1; display: flex; flex-direction: column; justify-content: flex-end; height: 100%;">
                <div style="display: flex; flex-direction: column; justify-content: flex-end; height: ${(d.balance / maxVal * 200)}px;">
                  <div style="height: ${(d.earnings / maxVal * 200)}px; background: linear-gradient(180deg, var(--brand-success), rgba(16,185,129,0.3)); border-radius: 3px 3px 0 0; min-height: 1px;" title="Earnings: ${fmtFull(d.earnings)}"></div>
                  <div style="height: ${(d.contributed / maxVal * 200)}px; background: linear-gradient(180deg, var(--brand-primary), rgba(99,102,241,0.3)); min-height: 1px;" title="Contributed: ${fmtFull(d.contributed)}"></div>
                </div>
                ${d.year % 5 === 0 || d.year === years ? `<span style="font-size: 0.6rem; color: var(--text-muted); text-align: center; margin-top: 4px;">Y${d.year}</span>` : ''}
              </div>
            `).join('')}
          </div>
          <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1rem; font-size: 0.75rem;">
            <div style="display: flex; align-items: center; gap: 0.375rem;"><div style="width: 12px; height: 12px; border-radius: 2px; background: var(--brand-primary);"></div> Contributions</div>
            <div style="display: flex; align-items: center; gap: 0.375rem;"><div style="width: 12px; height: 12px; border-radius: 2px; background: var(--brand-success);"></div> Earnings</div>
          </div>
        `;
      }
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // RETIREMENT (RRSP vs TFSA)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function calculateRetirement() {
      const income = parseFloat(document.getElementById('ret-income').value) || 0;
      const contribution = parseFloat(document.getElementById('ret-contribution').value) || 0;
      const age = parseInt(document.getElementById('ret-age').value) || 30;
      const retireAge = parseInt(document.getElementById('ret-retire-age').value) || 65;
      const annualReturn = parseFloat(document.getElementById('ret-return').value) / 100;
      const retireIncome = parseFloat(document.getElementById('ret-retire-income').value) || 0;
      const province = document.getElementById('ret-province').value;
      
      const years = retireAge - age;
      if (years <= 0) {
        document.getElementById('retirement-results').innerHTML = '<div class="result-card"><p style="color: var(--text-muted);">Retirement age must be greater than current age.</p></div>';
        return;
      }
      
      // Canadian federal tax brackets (2025)
      const fedTax = (inc) => {
        if (inc <= 0) return 0;
        let tax = 0;
        const brackets = [
          [55867, 0.15], [55867, 0.205], [61942, 0.26], [70000, 0.29], [Infinity, 0.33]
        ];
        let remaining = inc;
        for (const [limit, rate] of brackets) {
          const taxable = Math.min(remaining, limit);
          tax += taxable * rate;
          remaining -= taxable;
          if (remaining <= 0) break;
        }
        return tax;
      };
      
      // Provincial tax (simplified â€” Ontario)
      const provTax = (inc) => {
        if (province !== 'ON' || inc <= 0) return inc * 0.05; // Simplified for non-ON
        let tax = 0;
        const brackets = [
          [51446, 0.0505], [51446, 0.0915], [47046, 0.1116], [100000, 0.1216], [Infinity, 0.1316]
        ];
        let remaining = inc;
        for (const [limit, rate] of brackets) {
          const taxable = Math.min(remaining, limit);
          tax += taxable * rate;
          remaining -= taxable;
          if (remaining <= 0) break;
        }
        return tax;
      };
      
      const marginalRate = (inc) => {
        const tax1 = fedTax(inc) + provTax(inc);
        const tax2 = fedTax(inc + 1) + provTax(inc + 1);
        return tax2 - tax1;
      };
      
      const currentMarginal = marginalRate(income);
      const retireMarginal = marginalRate(retireIncome);
      
      // RRSP: Tax deduction now, taxed on withdrawal
      const rrspTaxSavings = contribution * currentMarginal;
      const rrspGross = contribution; // Full amount invested
      let rrspBalance = 0;
      for (let y = 0; y < years; y++) {
        rrspBalance = (rrspBalance + rrspGross) * (1 + annualReturn);
      }
      const rrspAfterTax = rrspBalance * (1 - retireMarginal);
      
      // TFSA: No deduction, tax-free growth and withdrawal
      const tfsaNet = contribution; // Same contribution amount
      let tfsaBalance = 0;
      for (let y = 0; y < years; y++) {
        tfsaBalance = (tfsaBalance + tfsaNet) * (1 + annualReturn);
      }
      
      // RRSP with reinvested refund
      const rrspWithRefund = contribution + rrspTaxSavings;
      let rrspRefundBalance = 0;
      for (let y = 0; y < years; y++) {
        rrspRefundBalance = (rrspRefundBalance + rrspWithRefund) * (1 + annualReturn);
      }
      const rrspRefundAfterTax = rrspRefundBalance * (1 - retireMarginal);
      
      const winner = rrspRefundAfterTax > tfsaBalance ? 'RRSP' : 'TFSA';
      const advantage = Math.abs(rrspRefundAfterTax - tfsaBalance);
      
      document.getElementById('retirement-results').innerHTML = `
        <div class="gradient-border-card">
          <div class="gradient-border-card-inner" style="text-align: center;">
            <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.5rem;">Recommendation</div>
            <div style="font-size: 1.75rem; font-weight: 800; margin-bottom: 0.25rem;">${winner} Wins</div>
            <div style="font-size: 0.85rem; color: var(--text-secondary);">by ${fmtFull(advantage)} over ${years} years</div>
          </div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div style="text-align: center; padding: 1rem; border-radius: var(--radius-md); background: ${winner === 'RRSP' ? 'rgba(99, 102, 241, 0.1)' : 'transparent'};">
              <div style="font-size: 0.72rem; color: var(--text-muted); text-transform: uppercase;">RRSP (After Tax)</div>
              <div class="mono" style="font-size: 1.25rem; font-weight: 700; color: var(--brand-primary);">${fmtFull(rrspRefundAfterTax)}</div>
              <div style="font-size: 0.72rem; color: var(--text-muted); margin-top: 0.25rem;">Pre-tax: ${fmtFull(rrspRefundBalance)}</div>
            </div>
            <div style="text-align: center; padding: 1rem; border-radius: var(--radius-md); background: ${winner === 'TFSA' ? 'rgba(6, 182, 212, 0.1)' : 'transparent'};">
              <div style="font-size: 0.72rem; color: var(--text-muted); text-transform: uppercase;">TFSA (Tax-Free)</div>
              <div class="mono" style="font-size: 1.25rem; font-weight: 700; color: var(--brand-accent);">${fmtFull(tfsaBalance)}</div>
              <div style="font-size: 0.72rem; color: var(--text-muted); margin-top: 0.25rem;">100% tax-free</div>
            </div>
          </div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Tax Analysis</div>
          <div style="display: flex; flex-direction: column; gap: 0.5rem; font-size: 0.85rem;">
            <div style="display: flex; justify-content: space-between;">
              <span style="color: var(--text-secondary);">Current Marginal Rate</span>
              <span class="mono" style="font-weight: 700;">${(currentMarginal * 100).toFixed(1)}%</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: var(--text-secondary);">Retirement Marginal Rate</span>
              <span class="mono" style="font-weight: 700;">${(retireMarginal * 100).toFixed(1)}%</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: var(--text-secondary);">RRSP Tax Refund (Annual)</span>
              <span class="mono" style="font-weight: 700; color: var(--brand-success);">${fmtFull(rrspTaxSavings)}</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: var(--text-secondary);">Tax Rate Arbitrage</span>
              <span class="mono" style="font-weight: 700; color: ${currentMarginal > retireMarginal ? 'var(--brand-success)' : 'var(--brand-danger)'};">${((currentMarginal - retireMarginal) * 100).toFixed(1)}%</span>
            </div>
          </div>
          <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 1rem; padding: 0.75rem; background: rgba(99,102,241,0.05); border-radius: var(--radius-sm);">
            ğŸ’¡ <strong>Rule of thumb:</strong> RRSP wins when your current tax rate is higher than your expected retirement tax rate. TFSA wins when rates are the same or lower now.
          </div>
        </div>
        <div class="affiliate-cta">
          <span class="ad-label">Ad</span>
          Open a TFSA with <a href="#">Canada's top-rated platforms</a>
        </div>
      `;
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // COMPOUND INTEREST
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function calculateCompound() {
      const initial = parseFloat(document.getElementById('comp-initial').value) || 0;
      const monthly = parseFloat(document.getElementById('comp-monthly').value) || 0;
      const rate = parseFloat(document.getElementById('comp-rate').value) / 100;
      const years = parseInt(document.getElementById('comp-years').value);
      const freq = parseInt(document.getElementById('comp-freq').value);
      
      const periodicRate = rate / freq;
      const totalPeriods = years * freq;
      const monthlyPeriods = freq / 12;
      
      // Calculate with contributions
      let balance = initial;
      let totalContributed = initial;
      let yearlyData = [];
      
      for (let month = 1; month <= years * 12; month++) {
        // Apply interest for the month
        const monthlyRate = Math.pow(1 + rate, 1 / 12) - 1;
        balance = balance * (1 + monthlyRate) + monthly;
        totalContributed += monthly;
        
        if (month % 12 === 0) {
          yearlyData.push({
            year: month / 12,
            balance,
            contributed: totalContributed,
            interest: balance - totalContributed
          });
        }
      }
      
      // Without contributions (initial only)
      const withoutContrib = initial * Math.pow(1 + rate, years);
      
      const totalInterest = balance - totalContributed;
      const effectiveRate = (Math.pow(balance / totalContributed, 1 / years) - 1) * 100;
      
      document.getElementById('compound-results').innerHTML = `
        <div class="result-card">
          <div class="result-label">Future Value</div>
          <div class="result-value">${fmtFull(balance)}</div>
        </div>
        
        <div class="result-card">
          <div class="result-label">Interest Earned</div>
          <div class="result-value" style="background: linear-gradient(135deg, var(--brand-success), var(--brand-accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">${fmtFull(totalInterest)}</div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">Summary</div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; font-size: 0.85rem;">
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Total Contributed</div>
              <div class="mono" style="font-weight: 700;">${fmtFull(totalContributed)}</div>
            </div>
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Growth Multiple</div>
              <div class="mono" style="font-weight: 700;">${(balance / totalContributed).toFixed(2)}x</div>
            </div>
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Without Contributions</div>
              <div class="mono" style="font-weight: 700;">${fmtFull(withoutContrib)}</div>
            </div>
            <div>
              <div style="font-size: 0.72rem; color: var(--text-muted);">Contribution Impact</div>
              <div class="mono" style="font-weight: 700; color: var(--brand-success);">+${fmtFull(balance - withoutContrib)}</div>
            </div>
          </div>
        </div>
        
        <div class="glass-card" style="padding: var(--space-lg);">
          <div style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;">The Power of Compound Interest</div>
          <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.7;">
            Your ${fmtFull(monthly)}/month contributions turn into <strong style="color: var(--text-primary);">${fmtFull(balance)}</strong> over ${years} years.
            That's <strong style="color: var(--brand-success);">${fmtFull(totalInterest)}</strong> in pure compound growth â€” money your money earned for you.
          </div>
        </div>
        <div class="affiliate-cta">
          <span class="ad-label">Sponsored</span>
          Start investing with <a href="#">$0 commissions</a>
        </div>
      `;
      
      // Growth chart
      if (yearlyData.length > 0) {
        const maxVal = yearlyData[yearlyData.length - 1].balance;
        document.getElementById('compound-chart').innerHTML = `
          <div style="font-size: 0.85rem; font-weight: 700; margin-bottom: 1rem;">Growth Visualization</div>
          <div style="display: flex; align-items: flex-end; gap: 3px; height: 240px;">
            ${yearlyData.map(d => `
              <div style="flex: 1; display: flex; flex-direction: column; justify-content: flex-end; height: 100%;">
                <div style="display: flex; flex-direction: column; justify-content: flex-end; height: ${(d.balance / maxVal * 220)}px;">
                  <div style="height: ${(d.interest / maxVal * 220)}px; background: linear-gradient(180deg, var(--brand-success), rgba(16,185,129,0.2)); border-radius: 3px 3px 0 0; min-height: 1px;" title="Interest: ${fmtFull(d.interest)}"></div>
                  <div style="height: ${(d.contributed / maxVal * 220)}px; background: linear-gradient(180deg, var(--brand-primary), rgba(99,102,241,0.2)); min-height: 1px;" title="Contributed: ${fmtFull(d.contributed)}"></div>
                </div>
                ${d.year % Math.ceil(years / 10) === 0 || d.year === years ? `<span style="font-size: 0.55rem; color: var(--text-muted); text-align: center; margin-top: 4px;">Y${d.year}</span>` : ''}
              </div>
            `).join('')}
          </div>
          <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1rem; font-size: 0.75rem;">
            <div style="display: flex; align-items: center; gap: 0.375rem;"><div style="width: 12px; height: 12px; border-radius: 2px; background: var(--brand-primary);"></div> Contributions</div>
            <div style="display: flex; align-items: center; gap: 0.375rem;"><div style="width: 12px; height: 12px; border-radius: 2px; background: var(--brand-success);"></div> Compound Interest</div>
          </div>
        `;
      }
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // TEST SUITE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function runTests() {
      const results = [];
      let passed = 0;
      let failed = 0;
      
      function assert(name, condition, detail) {
        if (condition) {
          passed++;
          results.push({ name, status: 'PASS', detail });
        } else {
          failed++;
          results.push({ name, status: 'FAIL', detail });
        }
      }
      
      // Test formatting
      assert('fmt: millions', fmt(5000000) === '$5.0M', fmt(5000000));
      assert('fmt: billions', fmt(2500000000) === '$2.5B', fmt(2500000000));
      assert('fmt: thousands', fmt(50000) === '$50.0K', fmt(50000));
      assert('fmtPct: basic', fmtPct(12.345) === '12.3%', fmtPct(12.345));
      
      // Test DCF calculation logic
      const fcf = 1000000;
      const growth = 0.10;
      const terminal = 0.025;
      const wacc = 0.12;
      const years = 5;
      
      let pvSum = 0;
      for (let i = 1; i <= years; i++) {
        pvSum += (fcf * Math.pow(1 + growth, i)) / Math.pow(1 + wacc, i);
      }
      const finalFCF = fcf * Math.pow(1 + growth, years);
      const tv = finalFCF * (1 + terminal) / (wacc - terminal);
      const pvTV = tv / Math.pow(1 + wacc, years);
      const ev = pvSum + pvTV;
      
      assert('DCF: PV of FCFs > 0', pvSum > 0, `PV sum = ${pvSum.toFixed(0)}`);
      assert('DCF: Terminal value > 0', tv > 0, `TV = ${tv.toFixed(0)}`);
      assert('DCF: EV > initial FCF', ev > fcf, `EV = ${ev.toFixed(0)}`);
      assert('DCF: EV reasonable range', ev > 5000000 && ev < 50000000, `EV = ${fmt(ev)}`);
      
      // Test mortgage calculation
      const price = 800000;
      const downPct = 0.20;
      const rate = 0.055;
      const principal = price * (1 - downPct);
      const semiRate = Math.pow(1 + rate / 2, 2) - 1;
      const mRate = Math.pow(1 + semiRate, 1 / 12) - 1;
      const mPayment = principal * (mRate * Math.pow(1 + mRate, 300)) / (Math.pow(1 + mRate, 300) - 1);
      
      assert('Mortgage: payment > 0', mPayment > 0, `Payment = ${mPayment.toFixed(2)}`);
      assert('Mortgage: payment reasonable', mPayment > 2000 && mPayment < 6000, `Payment = ${fmtFull(mPayment)}`);
      assert('Mortgage: semi-annual compounding', semiRate > rate, `Effective = ${(semiRate * 100).toFixed(3)}%`);
      
      // Test CMHC
      assert('CMHC: not required at 20%', downPct >= 0.20, 'Down 20% = no CMHC');
      const cmhc10 = principal * 0.031;
      assert('CMHC: 10% down premium', cmhc10 > 0, `CMHC at 10% = ${cmhc10.toFixed(0)}`);
      
      // Test CAGR
      const cagr = (Math.pow(25000 / 10000, 1 / 5) - 1) * 100;
      assert('CAGR: basic calc', Math.abs(cagr - 20.11) < 0.1, `CAGR = ${cagr.toFixed(2)}%`);
      
      // Test compound interest
      let balance = 10000;
      for (let m = 0; m < 12; m++) {
        balance *= (1 + 0.07 / 12);
      }
      assert('Compound: 1yr @7%', Math.abs(balance - 10722.9) < 5, `Balance = ${balance.toFixed(2)}`);
      
      // Test DCA
      let dcaBalance = 0;
      const dcaMonthly = 500;
      const dcaRate = Math.pow(1.08, 1 / 12) - 1;
      for (let m = 0; m < 240; m++) {
        dcaBalance = dcaBalance * (1 + dcaRate) + dcaMonthly;
      }
      assert('DCA: 20yr result > contributions', dcaBalance > 500 * 240, `Balance = ${dcaBalance.toFixed(0)} > ${500 * 240}`);
      
      // Test tax brackets
      const fedTaxResult = fedTax(120000);
      assert('Fed tax: positive for 120K', fedTaxResult > 0, `Tax = ${fedTaxResult.toFixed(0)}`);
      assert('Fed tax: reasonable', fedTaxResult > 15000 && fedTaxResult < 35000, `Tax = ${fedTaxResult.toFixed(0)}`);
      
      // Test nav links
      assert('Nav: page exists - home', !!document.getElementById('page-home'), '');
      assert('Nav: page exists - valuation', !!document.getElementById('page-valuation'), '');
      assert('Nav: page exists - mortgage', !!document.getElementById('page-mortgage'), '');
      assert('Nav: page exists - investment', !!document.getElementById('page-investment'), '');
      assert('Nav: page exists - retirement', !!document.getElementById('page-retirement'), '');
      assert('Nav: page exists - compound', !!document.getElementById('page-compound'), '');
      
      // Test theme toggle
      const wasDark = isDark;
      toggleTheme();
      assert('Theme: toggles correctly', isDark !== wasDark, `isDark changed to ${isDark}`);
      toggleTheme(); // Reset
      
      // Print results
      console.log(`\nğŸ§ª BABAGANOUSH TEST SUITE`);
      console.log(`${'â•'.repeat(50)}`);
      results.forEach(r => {
        console.log(`${r.status === 'PASS' ? 'âœ…' : 'âŒ'} ${r.name} ${r.detail ? `(${r.detail})` : ''}`);
      });
      console.log(`${'â•'.repeat(50)}`);
      console.log(`Results: ${passed} passed, ${failed} failed, ${passed + failed} total`);
      console.log(failed === 0 ? 'ğŸ‰ ALL TESTS PASSED!' : `âš ï¸ ${failed} TEST(S) FAILED`);
      
      return { passed, failed, total: passed + failed, results };
    }
    
    // Run tests on load (dev mode)
    if (location.hostname === 'localhost' || location.hostname === '127.0.0.1' || location.search.includes('test=true')) {
      window.addEventListener('load', () => {
        setTimeout(runTests, 500);
      });
    }
    
    // Expose for manual testing
    window.runTests = runTests;

    // â”€â”€ M&A Deal Analyzer â”€â”€
    function calculateMA() {
      const v = id => parseFloat(document.getElementById(id).value) || 0;
      const fmt = (n, d=1) => n.toLocaleString('en-US', {minimumFractionDigits:d, maximumFractionDigits:d});
      const fmtM = n => '$' + fmt(n, 1) + 'M';
      const fmtD = n => '$' + fmt(n, 2);

      // Inputs
      const acqEPS = v('ma-acq-eps'), acqPrice = v('ma-acq-price'), acqShares = v('ma-acq-shares'), acqPE = v('ma-acq-pe');
      const tgtEPS = v('ma-tgt-eps'), tgtPrice = v('ma-tgt-price'), tgtShares = v('ma-tgt-shares');
      const premium = v('ma-premium') / 100;
      const cashPct = v('ma-cash-pct') / 100, stockPct = 1 - cashPct;
      const debtCost = v('ma-debt-cost') / 100, taxRate = v('ma-tax') / 100;
      const revSyn = v('ma-rev-syn'), costSyn = v('ma-cost-syn');

      // Core calcs
      const offerPrice = tgtPrice * (1 + premium);
      const dealValue = offerPrice * tgtShares; // in $M
      const cashPortion = dealValue * cashPct;
      const stockPortion = dealValue * stockPct;
      const newSharesIssued = acqPrice > 0 ? stockPortion / acqPrice : 0;
      const proFormaShares = acqShares + newSharesIssued;

      // Earnings
      const acqNetIncome = acqEPS * acqShares;
      const tgtNetIncome = tgtEPS * tgtShares;
      const synergies = (revSyn + costSyn) * (1 - taxRate);
      const interestExpense = cashPortion * debtCost * (1 - taxRate);
      const proFormaNetIncome = acqNetIncome + tgtNetIncome + synergies - interestExpense;
      const proFormaEPS = proFormaShares > 0 ? proFormaNetIncome / proFormaShares : 0;
      const accretionDilution = acqEPS !== 0 ? ((proFormaEPS - acqEPS) / acqEPS) * 100 : 0;

      // Goodwill
      const tgtBookValue = tgtShares * tgtPrice; // simplified: book â‰ˆ market pre-premium
      const goodwill = dealValue - tgtBookValue;

      // Combined P/E
      const combinedPE = proFormaEPS > 0 ? acqPrice / proFormaEPS : 0;

      // Break-even synergies: find synergies needed so accretion = 0
      // proFormaEPS = acqEPS when synergies = S_be
      // (acqNI + tgtNI + S_be*(1-t) - interest) / proFormaShares = acqEPS
      const beNumerator = acqEPS * proFormaShares - acqNetIncome - tgtNetIncome + interestExpense;
      const breakEvenSyn = (1 - taxRate) > 0 ? beNumerator / (1 - taxRate) : 0;

      // Transaction fees
      const txnFees = dealValue * 0.02;

      const adColor = accretionDilution >= 0 ? 'var(--brand-success)' : 'var(--brand-danger)';
      const adLabel = accretionDilution >= 0 ? 'Accretive' : 'Dilutive';

      // Results
      document.getElementById('ma-results').innerHTML = `
        <div class="result-card glass-card" style="padding: var(--space-lg);">
          <h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Deal Summary</h3>
          <div style="display: grid; gap: 1rem;">
            <div><span style="color: var(--text-secondary); font-size: 0.85rem;">Offer Price / Share</span><div class="mono" style="font-size: 1.3rem; color: var(--brand-primary);">${fmtD(offerPrice)}</div></div>
            <div><span style="color: var(--text-secondary); font-size: 0.85rem;">Total Deal Value</span><div class="mono" style="font-size: 1.3rem; color: var(--brand-primary);">${fmtM(dealValue)}</div></div>
            <div style="border-top: 1px solid rgba(255,255,255,0.06); padding-top: 1rem;">
              <span style="color: var(--text-secondary); font-size: 0.85rem;">Pro Forma EPS</span>
              <div class="mono" style="font-size: 1.3rem; color: var(--brand-accent);">${fmtD(proFormaEPS)}</div>
              <span style="font-size: 0.75rem; color: var(--text-muted);">vs. standalone ${fmtD(acqEPS)}</span>
            </div>
            <div style="background: rgba(${accretionDilution >= 0 ? '46,204,113' : '231,76,60'},0.1); border-radius: 0.75rem; padding: 1rem; text-align: center;">
              <span style="color: var(--text-secondary); font-size: 0.85rem;">${adLabel}</span>
              <div class="mono" style="font-size: 1.8rem; font-weight: 700; color: ${adColor};">${accretionDilution >= 0 ? '+' : ''}${fmt(accretionDilution,2)}%</div>
            </div>
            <div><span style="color: var(--text-secondary); font-size: 0.85rem;">Goodwill Created</span><div class="mono" style="font-size: 1.1rem;">${fmtM(goodwill)}</div></div>
            <div><span style="color: var(--text-secondary); font-size: 0.85rem;">Combined P/E</span><div class="mono" style="font-size: 1.1rem;">${fmt(combinedPE,1)}x</div></div>
            <div><span style="color: var(--text-secondary); font-size: 0.85rem;">Break-even Synergies Needed</span><div class="mono" style="font-size: 1.1rem; color: ${breakEvenSyn > 0 ? 'var(--brand-warning)' : 'var(--brand-success)'};">${fmtM(breakEvenSyn)}</div></div>
          </div>
        </div>
      `;

      // Sensitivity table
      const premiums = [10, 20, 30, 40];
      const cashMixes = [0, 25, 50, 75, 100];
      let tbl = '<h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Sensitivity: Accretion / Dilution %</h3>';
      tbl += '<table class="sensitivity-table"><thead><tr><th>Premium \\ Cash%</th>';
      cashMixes.forEach(c => tbl += `<th>${c}%</th>`);
      tbl += '</tr></thead><tbody>';
      premiums.forEach(p => {
        tbl += `<tr><td style="font-weight:600;">${p}%</td>`;
        cashMixes.forEach(c => {
          const op = tgtPrice * (1 + p/100);
          const dv = op * tgtShares;
          const cp = dv * c/100, sp = dv * (1 - c/100);
          const ns = acqPrice > 0 ? sp / acqPrice : 0;
          const pfs = acqShares + ns;
          const ie = cp * debtCost * (1 - taxRate);
          const pfni = acqNetIncome + tgtNetIncome + synergies - ie;
          const pfeps = pfs > 0 ? pfni / pfs : 0;
          const ad = acqEPS !== 0 ? ((pfeps - acqEPS) / acqEPS) * 100 : 0;
          const cls = ad >= 0 ? 'positive-val' : 'negative-val';
          const hl = (p === v('ma-premium') && c === v('ma-cash-pct')) ? ' highlight' : '';
          tbl += `<td class="${cls}${hl}">${ad >= 0 ? '+' : ''}${ad.toFixed(1)}%</td>`;
        });
        tbl += '</tr>';
      });
      tbl += '</tbody></table>';
      document.getElementById('ma-sensitivity').innerHTML = tbl;

      // Sources & Uses
      const cashOnHand = 0; // simplified
      const newDebt = cashPortion;
      const stockIssued = stockPortion;
      let su = '<h3 style="font-size: 0.85rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 1rem;">Sources & Uses ($M)</h3>';
      su += '<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">';
      su += '<div><table class="sensitivity-table"><thead><tr><th colspan="2">Sources</th></tr></thead><tbody>';
      su += `<tr><td>New Debt</td><td class="mono">${fmtM(newDebt)}</td></tr>`;
      su += `<tr><td>Stock Issued</td><td class="mono">${fmtM(stockIssued)}</td></tr>`;
      su += `<tr><td>Cash on Hand</td><td class="mono">${fmtM(cashOnHand)}</td></tr>`;
      su += `<tr style="border-top:2px solid rgba(255,255,255,0.1);"><td style="font-weight:700;">Total Sources</td><td class="mono" style="font-weight:700;">${fmtM(newDebt + stockIssued + cashOnHand)}</td></tr>`;
      su += '</tbody></table></div>';
      su += '<div><table class="sensitivity-table"><thead><tr><th colspan="2">Uses</th></tr></thead><tbody>';
      su += `<tr><td>Purchase Price</td><td class="mono">${fmtM(dealValue)}</td></tr>`;
      su += `<tr><td>Transaction Fees (2%)</td><td class="mono">${fmtM(txnFees)}</td></tr>`;
      su += `<tr><td>Refinancing</td><td class="mono">${fmtM(0)}</td></tr>`;
      su += `<tr style="border-top:2px solid rgba(255,255,255,0.1);"><td style="font-weight:700;">Total Uses</td><td class="mono" style="font-weight:700;">${fmtM(dealValue + txnFees)}</td></tr>`;
      su += '</tbody></table></div></div>';
      document.getElementById('ma-sources-uses').innerHTML = su;
    }

    // Initialize M&A on page load
    document.addEventListener('DOMContentLoaded', function() { if(document.getElementById('ma-acq-eps')) calculateMA(); });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  STARTUP RUNWAY CALCULATOR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let runwayScenario = 'base';

    function switchRunwayTab(tab) {
      runwayScenario = tab;
      document.querySelectorAll('#runway-tabs .tab').forEach(t => t.classList.remove('active'));
      document.getElementById('runway-tab-' + tab).classList.add('active');
      calculateRunway();
    }

    function calculateRunway() {
      const cash = parseFloat(document.getElementById('rw-cash').value) || 0;
      const revenue = parseFloat(document.getElementById('rw-revenue').value) || 0;
      let growthPct = parseFloat(document.getElementById('rw-growth').value) || 0;
      const fixed = parseFloat(document.getElementById('rw-fixed').value) || 0;
      const variable = parseFloat(document.getElementById('rw-variable').value) || 0;
      const onetime = parseFloat(document.getElementById('rw-onetime').value) || 0;
      const hiring = parseFloat(document.getElementById('rw-hiring').value) || 0;

      let scenarioLabel = 'Base Case Scenario';
      let effectiveGrowth = growthPct;
      if (runwayScenario === 'conservative') { effectiveGrowth = 0; scenarioLabel = 'Conservative Scenario (No Growth)'; }
      if (runwayScenario === 'aggressive') { effectiveGrowth = growthPct * 2; scenarioLabel = 'Aggressive Scenario (' + (growthPct * 2) + '% Growth)'; }

      document.getElementById('rw-scenario-label').textContent = scenarioLabel;

      const totalCosts = fixed + variable;
      const burnRate = totalCosts - revenue;
      document.getElementById('rw-burn').textContent = fmtFull(burnRate);

      const maxMonths = 60;
      let balances = [];
      let flatRunway = 0;
      let growthRunway = 0;
      let breakEvenMonth = null;
      let hitZeroGrowth = false;

      // Flat runway (no growth)
      let flatBal = cash - onetime;
      for (let m = 1; m <= maxMonths; m++) {
        let flatCosts = totalCosts + (hiring * m);
        flatBal -= (flatCosts - revenue);
        if (flatBal <= 0) { flatRunway = m; break; }
        if (m === maxMonths) flatRunway = maxMonths;
      }

      // Growth runway
      let bal = cash - onetime;
      let rev = revenue;
      for (let m = 1; m <= maxMonths; m++) {
        rev = rev * (1 + effectiveGrowth / 100);
        let costs = totalCosts + (hiring * m);
        bal -= (costs - rev);
        balances.push({ month: m, balance: bal, revenue: rev, costs: costs });
        if (!breakEvenMonth && rev >= costs) breakEvenMonth = m;
        if (!hitZeroGrowth && bal <= 0) { growthRunway = m; hitZeroGrowth = true; }
      }
      if (!hitZeroGrowth) growthRunway = maxMonths;

      document.getElementById('rw-runway-flat').textContent = flatRunway >= maxMonths ? '60+ months' : flatRunway + ' months';
      document.getElementById('rw-runway-growth').textContent = growthRunway >= maxMonths ? '60+ months' : growthRunway + ' months';

      const now = new Date();
      if (growthRunway < maxMonths) {
        const zeroDate = new Date(now.getFullYear(), now.getMonth() + growthRunway, 1);
        document.getElementById('rw-zero-date').textContent = zeroDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
      } else {
        document.getElementById('rw-zero-date').textContent = 'N/A (sustainable)';
      }

      const rw = growthRunway;
      const safeEl = document.getElementById('rw-safe-zone');
      const safeText = document.getElementById('rw-safe-text');
      if (rw > 12 || rw >= maxMonths) {
        safeText.textContent = '\u{1F7E2} Safe Zone';
        safeEl.style.borderColor = 'rgba(16, 185, 129, 0.4)';
        safeEl.style.background = 'linear-gradient(135deg, rgba(16, 185, 129, 0.08), rgba(16, 185, 129, 0.03))';
      } else if (rw >= 6) {
        safeText.textContent = '\u{1F7E1} Caution';
        safeEl.style.borderColor = 'rgba(245, 158, 11, 0.4)';
        safeEl.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.08), rgba(245, 158, 11, 0.03))';
      } else {
        safeText.textContent = '\u{1F534} Danger';
        safeEl.style.borderColor = 'rgba(239, 68, 68, 0.4)';
        safeEl.style.background = 'linear-gradient(135deg, rgba(239, 68, 68, 0.08), rgba(239, 68, 68, 0.03))';
      }

      document.getElementById('rw-breakeven').textContent = breakEvenMonth ? 'Month ' + breakEvenMonth : 'Not within 60 months';

      // Chart
      const chart = document.getElementById('rw-chart');
      const maxBal = Math.max(...balances.map(b => Math.abs(b.balance)), 1);
      const months = Math.min(balances.length, 36);
      let html = '';
      for (let i = 0; i < months; i++) {
        const b = balances[i];
        const pct = Math.min(Math.abs(b.balance) / maxBal * 100, 100);
        const isNeg = b.balance < 0;
        const isBE = breakEvenMonth && i + 1 === breakEvenMonth;
        let color = isNeg ? 'var(--brand-danger)' : (isBE ? 'var(--brand-success)' : 'linear-gradient(to top, var(--brand-primary), var(--brand-accent))');
        const title = 'Month ' + (i + 1) + ': ' + fmtFull(b.balance);
        html += '<div style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;height:100%;position:relative;" title="' + title + '">';
        html += '<div style="width:100%;height:' + Math.max(pct, 2) + '%;background:' + color + ';border-radius:3px 3px 0 0;min-height:2px;transition:height 0.5s ease;"></div>';
        if (i % 6 === 0 || i === months - 1) html += '<span style="font-size:0.55rem;color:var(--text-muted);position:absolute;bottom:-18px;">M' + (i + 1) + '</span>';
        html += '</div>';
      }
      chart.innerHTML = html;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  NET WORTH TRACKER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function nwVal(id) { return parseFloat(document.getElementById(id).value) || 0; }

    function calculateNetWorth() {
      const assets = {
        'Cash & Savings': nwVal('nw-cash'),
        'TFSA': nwVal('nw-tfsa'),
        'RRSP': nwVal('nw-rrsp'),
        'Non-Registered': nwVal('nw-nonreg'),
        'Real Estate': nwVal('nw-realestate'),
        'Vehicles': nwVal('nw-vehicles'),
        'Other Assets': nwVal('nw-other-assets'),
      };
      const liabilities = {
        'Mortgage': nwVal('nw-mortgage'),
        'Car Loans': nwVal('nw-carloans'),
        'Student Loans': nwVal('nw-student'),
        'Credit Cards': nwVal('nw-cc'),
        'Line of Credit': nwVal('nw-loc'),
        'Other Debt': nwVal('nw-other-debt'),
      };

      const totalAssets = Object.values(assets).reduce((a, b) => a + b, 0);
      const totalLiabilities = Object.values(liabilities).reduce((a, b) => a + b, 0);
      const netWorth = totalAssets - totalLiabilities;
      const liquidNW = totalAssets - assets['Real Estate'] - assets['Vehicles'] - totalLiabilities;

      document.getElementById('nw-total-assets').textContent = fmtFull(totalAssets);
      document.getElementById('nw-total-liabilities').textContent = fmtFull(totalLiabilities);
      document.getElementById('nw-networth').textContent = fmtFull(netWorth);
      document.getElementById('nw-liquid').textContent = fmtFull(liquidNW);

      // Debt-to-asset ratio
      const dtaEl = document.getElementById('nw-dta');
      if (totalAssets > 0) {
        const dta = (totalLiabilities / totalAssets * 100);
        let pillClass = dta > 80 ? 'negative' : dta > 50 ? 'neutral' : 'positive';
        let icon = dta > 80 ? '\u{1F534}' : dta > 50 ? '\u{1F7E1}' : '\u{1F7E2}';
        dtaEl.innerHTML = '<span class="metric-pill ' + pillClass + '">' + icon + ' Debt-to-Asset: ' + dta.toFixed(1) + '%</span>';
      } else {
        dtaEl.innerHTML = '';
      }

      // Pie chart (conic-gradient)
      const colors = ['#6366f1', '#8b5cf6', '#06b6d4', '#10b981', '#f59e0b', '#ef4444', '#ec4899'];
      const assetEntries = Object.entries(assets).filter(function(e) { return e[1] > 0; });
      if (totalAssets > 0 && assetEntries.length > 0) {
        let gradParts = [];
        let cumPct = 0;
        let legendHtml = '';
        assetEntries.forEach(function(entry, i) {
          const name = entry[0], val = entry[1];
          const pct = val / totalAssets * 100;
          const c = colors[i % colors.length];
          gradParts.push(c + ' ' + cumPct.toFixed(1) + '% ' + (cumPct + pct).toFixed(1) + '%');
          legendHtml += '<div style="display:flex;align-items:center;gap:6px;"><span style="width:10px;height:10px;border-radius:2px;background:' + c + ';flex-shrink:0;"></span>' + name + ' <span class="mono" style="color:var(--text-muted);">' + pct.toFixed(0) + '%</span></div>';
          cumPct += pct;
        });
        document.getElementById('nw-pie').style.background = 'conic-gradient(' + gradParts.join(', ') + ')';
        document.getElementById('nw-pie-legend').innerHTML = legendHtml;
      } else {
        document.getElementById('nw-pie').style.background = 'var(--border-primary)';
        document.getElementById('nw-pie-legend').innerHTML = '<span style="color:var(--text-muted);">Enter assets to see allocation</span>';
      }
    }

    function saveNetWorthSnapshot() {
      const snap = {
        date: new Date().toISOString(),
        assets: nwVal('nw-cash') + nwVal('nw-tfsa') + nwVal('nw-rrsp') + nwVal('nw-nonreg') + nwVal('nw-realestate') + nwVal('nw-vehicles') + nwVal('nw-other-assets'),
        liabilities: nwVal('nw-mortgage') + nwVal('nw-carloans') + nwVal('nw-student') + nwVal('nw-cc') + nwVal('nw-loc') + nwVal('nw-other-debt'),
      };
      snap.netWorth = snap.assets - snap.liabilities;
      const snaps = JSON.parse(localStorage.getItem('nw-snapshots') || '[]');
      snaps.push(snap);
      localStorage.setItem('nw-snapshots', JSON.stringify(snaps));
      loadNetWorthSnapshots();
    }

    function loadNetWorthSnapshots() {
      const snaps = JSON.parse(localStorage.getItem('nw-snapshots') || '[]');
      const el = document.getElementById('nw-snapshots');
      if (snaps.length === 0) {
        el.innerHTML = '<p style="color:var(--text-muted);font-size:0.8rem;">No snapshots yet. Save one to start tracking.</p>';
        return;
      }
      let html = '<div style="display:flex;flex-direction:column;gap:0.5rem;">';
      snaps.slice().reverse().forEach(function(s) {
        const d = new Date(s.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });
        const nwColor = s.netWorth >= 0 ? 'var(--brand-success)' : 'var(--brand-danger)';
        html += '<div style="display:flex;justify-content:space-between;align-items:center;padding:0.5rem 0.75rem;background:var(--bg-secondary);border-radius:var(--radius-sm);border:1px solid var(--border-primary);">';
        html += '<span style="color:var(--text-secondary);">' + d + '</span>';
        html += '<span class="mono" style="font-weight:600;color:' + nwColor + ';">' + fmtFull(s.netWorth) + '</span>';
        html += '</div>';
      });
      html += '</div>';
      html += '<button class="btn btn-ghost btn-sm" style="margin-top:0.75rem;color:var(--brand-danger);font-size:0.72rem;" onclick="if(confirm(\'Clear all snapshots?\')){localStorage.removeItem(\'nw-snapshots\');loadNetWorthSnapshots();}">Clear All Snapshots</button>';
      el.innerHTML = html;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  NEWSLETTER SIGNUP
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function subscribeNewsletter() {
      const input = document.getElementById('newsletter-email');
      const email = input.value.trim();
      if (!email || !email.includes('@') || !email.includes('.')) {
        input.style.borderColor = 'var(--brand-danger)';
        setTimeout(function() { input.style.borderColor = ''; }, 2000);
        return;
      }
      const subs = JSON.parse(localStorage.getItem('bb-newsletter') || '[]');
      if (!subs.includes(email)) { subs.push(email); localStorage.setItem('bb-newsletter', JSON.stringify(subs)); }
      input.value = '';
      // Show toast
      const toast = document.createElement('div');
      toast.className = 'toast-success';
      toast.innerHTML = 'âœ… You\'re subscribed! Welcome aboard.';
      document.body.appendChild(toast);
      setTimeout(function() { toast.remove(); }, 3500);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  COOKIE CONSENT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    (function() {
      if (localStorage.getItem('bb-cookie-consent')) return;
      var banner = document.createElement('div');
      banner.className = 'cookie-banner';
      banner.innerHTML = '<span>ğŸª We use cookies to improve your experience.</span><div class="cookie-banner-btns"><button class="btn btn-primary btn-sm" onclick="acceptCookies(true)">Accept</button><button class="btn btn-secondary btn-sm" onclick="acceptCookies(false)">Decline</button></div>';
      document.body.appendChild(banner);
    })();
    function acceptCookies(accepted) {
      localStorage.setItem('bb-cookie-consent', accepted ? 'accepted' : 'declined');
      var b = document.querySelector('.cookie-banner');
      if (b) b.remove();
    }

    // Register Service Worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').catch(function(){});
    }
  </script>
</body>
</html>